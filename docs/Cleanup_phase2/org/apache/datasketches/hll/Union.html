<!DOCTYPE HTML>
<html lang>
<head>
<!-- Generated by javadoc (24) -->
<title>Union (datasketches-java 9.0.0-SNAPSHOT API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: org.apache.datasketches.hll, class: Union">
<meta name="generator" content="javadoc/ClassWriter">
<link rel="stylesheet" type="text/css" href="../../../../resource-files/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../resource-files/stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script-files/script.js"></script>
<script type="text/javascript" src="../../../../script-files/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../script-files/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">const pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="nav-content">
<div class="nav-menu-button"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button></div>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/Union.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../search.html">Search</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
</div>
<div class="sub-nav">
<div class="nav-content">
<ol class="sub-nav-list">
<li><a href="package-summary.html">org.apache.datasketches.hll</a></li>
<li><a href="Union.html" class="current-selection">Union</a></li>
</ol>
<div class="nav-list-search">
<input type="text" id="search-input" disabled placeholder="Search" aria-label="Search in documentation" autocomplete="off">
<input type="reset" id="reset-search" disabled value="Reset">
</div>
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="main-grid">
<nav role="navigation" class="toc" aria-label="Table of contents">
<div class="toc-header">Contents&nbsp;
<input type="text" class="filter-input" disabled placeholder="Filter" aria-label="Filter table of contents" autocomplete="off">
<input type="reset" class="reset-filter" disabled value="Reset">
</div>
<button class="hide-sidebar"><span>Hide sidebar&nbsp;</span>&#10094;</button><button class="show-sidebar">&#10095;<span>&nbsp;Show sidebar</span></button>
<ol class="toc-list">
<li><a href="#" tabindex="0">Description</a></li>
<li><a href="#constructor-summary" tabindex="0">Constructor Summary</a></li>
<li><a href="#method-summary" tabindex="0">Method Summary</a></li>
<li><a href="#constructor-detail" tabindex="0">Constructor Details</a>
<ol class="toc-list">
<li><a href="#%3Cinit%3E()" tabindex="0">Union()</a></li>
<li><a href="#%3Cinit%3E(int)" tabindex="0">Union(int)</a></li>
<li><a href="#%3Cinit%3E(int,java.lang.foreign.MemorySegment)" tabindex="0">Union(int, MemorySegment)</a></li>
</ol>
</li>
<li><a href="#method-detail" tabindex="0">Method Details</a>
<ol class="toc-list">
<li><a href="#heapify(byte%5B%5D)" tabindex="0">heapify(byte[])</a></li>
<li><a href="#heapify(java.lang.foreign.MemorySegment)" tabindex="0">heapify(MemorySegment)</a></li>
<li><a href="#writableWrap(java.lang.foreign.MemorySegment)" tabindex="0">writableWrap(MemorySegment)</a></li>
<li><a href="#getCompositeEstimate()" tabindex="0">getCompositeEstimate()</a></li>
<li><a href="#getCompactSerializationBytes()" tabindex="0">getCompactSerializationBytes()</a></li>
<li><a href="#getEstimate()" tabindex="0">getEstimate()</a></li>
<li><a href="#getLgConfigK()" tabindex="0">getLgConfigK()</a></li>
<li><a href="#getLowerBound(int)" tabindex="0">getLowerBound(int)</a></li>
<li><a href="#getMaxSerializationBytes(int)" tabindex="0">getMaxSerializationBytes(int)</a></li>
<li><a href="#getResult()" tabindex="0">getResult()</a></li>
<li><a href="#getResult(org.apache.datasketches.hll.TgtHllType)" tabindex="0">getResult(TgtHllType)</a></li>
<li><a href="#getTgtHllType()" tabindex="0">getTgtHllType()</a></li>
<li><a href="#getUpdatableSerializationBytes()" tabindex="0">getUpdatableSerializationBytes()</a></li>
<li><a href="#getUpperBound(int)" tabindex="0">getUpperBound(int)</a></li>
<li><a href="#isCompact()" tabindex="0">isCompact()</a></li>
<li><a href="#isEmpty()" tabindex="0">isEmpty()</a></li>
<li><a href="#hasMemorySegment()" tabindex="0">hasMemorySegment()</a></li>
<li><a href="#isOffHeap()" tabindex="0">isOffHeap()</a></li>
<li><a href="#isSameResource(java.lang.foreign.MemorySegment)" tabindex="0">isSameResource(MemorySegment)</a></li>
<li><a href="#reset()" tabindex="0">reset()</a></li>
<li><a href="#toCompactByteArray()" tabindex="0">toCompactByteArray()</a></li>
<li><a href="#toUpdatableByteArray()" tabindex="0">toUpdatableByteArray()</a></li>
<li><a href="#toString(boolean,boolean,boolean,boolean)" tabindex="0">toString(boolean, boolean, boolean, boolean)</a></li>
<li><a href="#update(org.apache.datasketches.hll.HllSketch)" tabindex="0">update(HllSketch)</a></li>
<li><a href="#getSerializationVersion()" tabindex="0">getSerializationVersion()</a></li>
<li><a href="#getSerializationVersion(java.lang.foreign.MemorySegment)" tabindex="0">getSerializationVersion(MemorySegment)</a></li>
<li><a href="#getRelErr(boolean,boolean,int,int)" tabindex="0">getRelErr(boolean, boolean, int, int)</a></li>
<li><a href="#isEstimationMode()" tabindex="0">isEstimationMode()</a></li>
<li><a href="#toString()" tabindex="0">toString()</a></li>
<li><a href="#toString(boolean,boolean,boolean)" tabindex="0">toString(boolean, boolean, boolean)</a></li>
<li><a href="#update(long)" tabindex="0">update(long)</a></li>
<li><a href="#update(double)" tabindex="0">update(double)</a></li>
<li><a href="#update(java.lang.String)" tabindex="0">update(String)</a></li>
<li><a href="#update(java.nio.ByteBuffer)" tabindex="0">update(ByteBuffer)</a></li>
<li><a href="#update(byte%5B%5D)" tabindex="0">update(byte[])</a></li>
<li><a href="#update(char%5B%5D)" tabindex="0">update(char[])</a></li>
<li><a href="#update(int%5B%5D)" tabindex="0">update(int[])</a></li>
<li><a href="#update(long%5B%5D)" tabindex="0">update(long[])</a></li>
</ol>
</li>
</ol>
</nav>
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<h1 title="Class Union" class="title">Class Union</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">org.apache.datasketches.hll.Union</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../common/MemorySegmentStatus.html" title="interface in org.apache.datasketches.common">MemorySegmentStatus</a></code></dd>
</dl>
<hr>
<div class="horizontal-scroll">
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">Union</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">This performs union operations for all HllSketches. This union operator can be configured to be
 on or off heap.  The source sketch given to this union using the <a href="#update(org.apache.datasketches.hll.HllSketch)"><code>update(HllSketch)</code></a> can
 be configured with any precision value <i>lgConfigK</i> (from 4 to 21), any <i>TgtHllType</i>
 (HLL_4, HLL_6, HLL_8), and either on or off-heap; and it can be in either of the sparse modes
 (<i>LIST</i> or <i>SET</i>), or the dense mode (<i>HLL</i>).

 <p>Although the API for this union operator parallels many of the methods of the
 <i>HllSketch</i>, the behavior of the union operator has some fundamental differences.</p>

 <p>First, this union operator is configured with a <i>lgMaxK</i> instead of the normal
 <i>lgConfigK</i>.  Generally, this union operator will inherit the lowest <i>lgConfigK</i>
 less than <i>lgMaxK</i> that it has seen. However, the <i>lgConfigK</i> of incoming sketches that
 are still in sparse are ignored. The <i>lgMaxK</i> provides the user the ability to specify the
 largest maximum size for the union operation.

 <p>Second, the user cannot specify the <a href="TgtHllType.html" title="enum class in org.apache.datasketches.hll"><code>TgtHllType</code></a> as an input parameter to the union.
 Instead, it is specified for the sketch returned with <a href="#getResult(org.apache.datasketches.hll.TgtHllType)"><code>getResult(TgtHllType)</code></a>.

 <p>The following graph illustrates the HLL Merge speed.</p>

 <p><img src="doc-files/HLL_UnionTime4_6_8_Java_CPP.png" width="500" alt="HLL LgK12 Union Speed"></p>
 This graph illustrates the relative merging speed of the HLL 4,6,8 Java HLL sketches compared to
 the DataSketches C++ implementations of the same sketches. With this particular test (merging 32 relative large
 sketches together), the Java HLL 8 is the fastest and the Java HLL 4 the slowest, with a mixed cluster in the middle.
 Union / Merging speed is somewhat difficult to measure as the performance is very dependent on the mix of sketch
 sizes (and types) you are merging. So your mileage will vary!

 <p>For a complete example of using the Union operator
 see <a href="https://datasketches.apache.org/docs/HLL/HllJavaExample.html">Union Example</a>.</p></div>
<dl class="notes">
<dt>Author:</dt>
<dd>Lee Rhodes, Kevin Lang</dd>
</dl>
</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">Union</a>()</code></div>
<div class="col-last even-row-color">
<div class="block">Construct this Union operator with the default maximum log-base-2 of <i>K</i>.</div>
</div>
<div class="col-constructor-name odd-row-color"><code><a href="#%3Cinit%3E(int)" class="member-name-link">Union</a><wbr>(int&nbsp;lgMaxK)</code></div>
<div class="col-last odd-row-color">
<div class="block">Construct this Union operator with a given maximum log-base-2 of <i>K</i>.</div>
</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(int,java.lang.foreign.MemorySegment)" class="member-name-link">Union</a><wbr>(int&nbsp;lgMaxK,
 <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/foreign/MemorySegment.html" title="class or interface in java.lang.foreign" class="external-link">MemorySegment</a>&nbsp;dstWseg)</code></div>
<div class="col-last even-row-color">
<div class="block">Construct this Union operator with a given maximum log-base-2 of <i>K</i> and the given
 MemorySegment as the destination for this Union.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getCompactSerializationBytes()" class="member-name-link">getCompactSerializationBytes</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Gets the size in bytes of the current sketch when serialized using
 <i>toCompactByteArray()</i>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>double</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getCompositeEstimate()" class="member-name-link">getCompositeEstimate</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This is less accurate than the <i>getEstimate()</i> method and is automatically used
 when the sketch has gone through union operations where the more accurate HIP estimator
 cannot be used.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>double</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getEstimate()" class="member-name-link">getEstimate</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Return the cardinality estimate</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getLgConfigK()" class="member-name-link">getLgConfigK</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Gets the effective <i>lgConfigK</i> for the union operator, which may be less than
 <i>lgMaxK</i>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>double</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getLowerBound(int)" class="member-name-link">getLowerBound</a><wbr>(int&nbsp;numStdDev)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Gets the approximate lower error bound given the specified number of Standard Deviations.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getMaxSerializationBytes(int)" class="member-name-link">getMaxSerializationBytes</a><wbr>(int&nbsp;lgK)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns the maximum size in bytes that this union operator can grow to given a lgK.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static double</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getRelErr(boolean,boolean,int,int)" class="member-name-link">getRelErr</a><wbr>(boolean&nbsp;upperBound,
 boolean&nbsp;oooFlag,
 int&nbsp;lgConfigK,
 int&nbsp;numStdDev)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Gets the current (approximate) Relative Error (RE) asymptotic values given several
 parameters.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="HllSketch.html" title="class in org.apache.datasketches.hll">HllSketch</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getResult()" class="member-name-link">getResult</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Return the result of this union operator as an HLL_4 sketch.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="HllSketch.html" title="class in org.apache.datasketches.hll">HllSketch</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getResult(org.apache.datasketches.hll.TgtHllType)" class="member-name-link">getResult</a><wbr>(<a href="TgtHllType.html" title="enum class in org.apache.datasketches.hll">TgtHllType</a>&nbsp;tgtHllType)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Return the result of this union operator with the specified <a href="TgtHllType.html" title="enum class in org.apache.datasketches.hll"><code>TgtHllType</code></a></div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static final int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getSerializationVersion()" class="member-name-link">getSerializationVersion</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns the current serialization version.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static final int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getSerializationVersion(java.lang.foreign.MemorySegment)" class="member-name-link">getSerializationVersion</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/foreign/MemorySegment.html" title="class or interface in java.lang.foreign" class="external-link">MemorySegment</a>&nbsp;seg)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns the current serialization version of the given MemorySegment.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="TgtHllType.html" title="enum class in org.apache.datasketches.hll">TgtHllType</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getTgtHllType()" class="member-name-link">getTgtHllType</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Gets the <a href="TgtHllType.html" title="enum class in org.apache.datasketches.hll"><code>TgtHllType</code></a></div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getUpdatableSerializationBytes()" class="member-name-link">getUpdatableSerializationBytes</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Gets the size in bytes of the current sketch when serialized using
 <i>toUpdatableByteArray()</i>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>double</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getUpperBound(int)" class="member-name-link">getUpperBound</a><wbr>(int&nbsp;numStdDev)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Gets the approximate upper error bound given the specified number of Standard Deviations.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#hasMemorySegment()" class="member-name-link">hasMemorySegment</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns true if this sketch was created using MemorySegment.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static final <a href="Union.html" title="class in org.apache.datasketches.hll">Union</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#heapify(byte%5B%5D)" class="member-name-link">heapify</a><wbr>(byte[]&nbsp;byteArray)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Construct a union operator populated with the given byte array image of an HllSketch.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static final <a href="Union.html" title="class in org.apache.datasketches.hll">Union</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#heapify(java.lang.foreign.MemorySegment)" class="member-name-link">heapify</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/foreign/MemorySegment.html" title="class or interface in java.lang.foreign" class="external-link">MemorySegment</a>&nbsp;seg)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Construct a union operator populated with the given MemorySegment image of an HllSketch.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isCompact()" class="member-name-link">isCompact</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns true if the backing MemorySegment of this sketch is in compact form.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isEmpty()" class="member-name-link">isEmpty</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns true if empty</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isEstimationMode()" class="member-name-link">isEstimationMode</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This HLL family of sketches and operators is always estimating, even for very small values.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isOffHeap()" class="member-name-link">isOffHeap</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns true if the backing MemorySegment for this sketch is off-heap.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isSameResource(java.lang.foreign.MemorySegment)" class="member-name-link">isSameResource</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/foreign/MemorySegment.html" title="class or interface in java.lang.foreign" class="external-link">MemorySegment</a>&nbsp;seg)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns true if the given MemorySegment refers to the same underlying resource as this sketch.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#reset()" class="member-name-link">reset</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Resets to empty and retains the current lgK, but does not change the configured value of
 lgMaxK.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>byte[]</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#toCompactByteArray()" class="member-name-link">toCompactByteArray</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Gets the serialization of this union operator as a byte array in compact form, which is
 designed to be heapified only.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#toString()" class="member-name-link">toString</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Human readable summary as a string.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#toString(boolean,boolean,boolean)" class="member-name-link">toString</a><wbr>(boolean&nbsp;summary,
 boolean&nbsp;detail,
 boolean&nbsp;auxDetail)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Human readable summary with optional detail.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#toString(boolean,boolean,boolean,boolean)" class="member-name-link">toString</a><wbr>(boolean&nbsp;summary,
 boolean&nbsp;hllDetail,
 boolean&nbsp;auxDetail,
 boolean&nbsp;all)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Human readable summary with optional detail</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>byte[]</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#toUpdatableByteArray()" class="member-name-link">toUpdatableByteArray</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Serializes this sketch as a byte array in an updatable form.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#update(byte%5B%5D)" class="member-name-link">update</a><wbr>(byte[]&nbsp;data)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Present the given byte array as a potential unique item.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#update(char%5B%5D)" class="member-name-link">update</a><wbr>(char[]&nbsp;data)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Present the given char array as a potential unique item.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#update(double)" class="member-name-link">update</a><wbr>(double&nbsp;datum)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Present the given double (or float) datum as a potential unique item.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#update(int%5B%5D)" class="member-name-link">update</a><wbr>(int[]&nbsp;data)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Present the given integer array as a potential unique item.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#update(long)" class="member-name-link">update</a><wbr>(long&nbsp;datum)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Present the given long as a potential unique item.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#update(long%5B%5D)" class="member-name-link">update</a><wbr>(long[]&nbsp;data)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Present the given long array as a potential unique item.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#update(java.lang.String)" class="member-name-link">update</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;datum)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Present the given String as a potential unique item.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#update(java.nio.ByteBuffer)" class="member-name-link">update</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/nio/ByteBuffer.html" title="class or interface in java.nio" class="external-link">ByteBuffer</a>&nbsp;data)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Present the given byte buffer as a potential unique item.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#update(org.apache.datasketches.hll.HllSketch)" class="member-name-link">update</a><wbr>(<a href="HllSketch.html" title="class in org.apache.datasketches.hll">HllSketch</a>&nbsp;sketch)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Update this union operator with the given sketch.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static final <a href="Union.html" title="class in org.apache.datasketches.hll">Union</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#writableWrap(java.lang.foreign.MemorySegment)" class="member-name-link">writableWrap</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/foreign/MemorySegment.html" title="class or interface in java.lang.foreign" class="external-link">MemorySegment</a>&nbsp;srcWseg)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Wraps the given MemorySegment, which must be a image of a valid updatable HLL_8 sketch,
 and may have data.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>Union</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">Union</span>()</div>
<div class="block">Construct this Union operator with the default maximum log-base-2 of <i>K</i>.</div>
</div>
</section>
</li>
<li>
<section class="detail" id="&lt;init&gt;(int)">
<h3>Union</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">Union</span><wbr><span class="parameters">(int&nbsp;lgMaxK)</span></div>
<div class="block">Construct this Union operator with a given maximum log-base-2 of <i>K</i>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>lgMaxK</code> - the desired maximum log-base-2 of <i>K</i>.  This value must be
 between 4 and 21 inclusively.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="&lt;init&gt;(int,java.lang.foreign.MemorySegment)">
<h3>Union</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">Union</span><wbr><span class="parameters">(int&nbsp;lgMaxK,
 <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/foreign/MemorySegment.html" title="class or interface in java.lang.foreign" class="external-link">MemorySegment</a>&nbsp;dstWseg)</span></div>
<div class="block">Construct this Union operator with a given maximum log-base-2 of <i>K</i> and the given
 MemorySegment as the destination for this Union. This MemorySegment is usually configured
 for off-heap MemorySegment. What remains on the java heap is a thin wrapper object that reads and
 writes to the given MemorySegment.

 <p>The given <i>dstSeg</i> is checked for the required capacity as determined by
 <a href="HllSketch.html#getMaxUpdatableSerializationBytes(int,org.apache.datasketches.hll.TgtHllType)"><code>HllSketch.getMaxUpdatableSerializationBytes(int, TgtHllType)</code></a>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>lgMaxK</code> - the desired maximum log-base-2 of <i>K</i>.  This value must be
 between 4 and 21 inclusively.</dd>
<dd><code>dstWseg</code> - the destination writable MemorySegment for the sketch.</dd>
</dl>
</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="heapify(byte[])">
<h3>heapify</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="Union.html" title="class in org.apache.datasketches.hll">Union</a></span>&nbsp;<span class="element-name">heapify</span><wbr><span class="parameters">(byte[]&nbsp;byteArray)</span></div>
<div class="block">Construct a union operator populated with the given byte array image of an HllSketch.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>byteArray</code> - the given byte array</dd>
<dt>Returns:</dt>
<dd>a union operator populated with the given byte array image of an HllSketch.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="heapify(java.lang.foreign.MemorySegment)">
<h3>heapify</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="Union.html" title="class in org.apache.datasketches.hll">Union</a></span>&nbsp;<span class="element-name">heapify</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/foreign/MemorySegment.html" title="class or interface in java.lang.foreign" class="external-link">MemorySegment</a>&nbsp;seg)</span></div>
<div class="block">Construct a union operator populated with the given MemorySegment image of an HllSketch.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>seg</code> - the given MemorySegment</dd>
<dt>Returns:</dt>
<dd>a union operator populated with the given MemorySegment image of an HllSketch.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="writableWrap(java.lang.foreign.MemorySegment)">
<h3>writableWrap</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="Union.html" title="class in org.apache.datasketches.hll">Union</a></span>&nbsp;<span class="element-name">writableWrap</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/foreign/MemorySegment.html" title="class or interface in java.lang.foreign" class="external-link">MemorySegment</a>&nbsp;srcWseg)</span></div>
<div class="block">Wraps the given MemorySegment, which must be a image of a valid updatable HLL_8 sketch,
 and may have data. What remains on the java heap is a
 thin wrapper object that reads and writes to the given MemorySegment, which, depending on
 how the user configures the MemorySegment, may actually reside on the Java heap or off-heap.

 <p>The given <i>dstSeg</i> is checked for the required capacity as determined by
 <a href="HllSketch.html#getMaxUpdatableSerializationBytes(int,org.apache.datasketches.hll.TgtHllType)"><code>HllSketch.getMaxUpdatableSerializationBytes(int, TgtHllType)</code></a>, and for the correct type.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>srcWseg</code> - an writable image of a valid sketch with data.</dd>
<dt>Returns:</dt>
<dd>a Union operator where the sketch data is in the given dstSeg.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getCompositeEstimate()">
<h3>getCompositeEstimate</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">getCompositeEstimate</span>()</div>
<div class="block">This is less accurate than the <i>getEstimate()</i> method and is automatically used
 when the sketch has gone through union operations where the more accurate HIP estimator
 cannot be used.
 This is made public only for error characterization software that exists in separate
 packages and is not intended for normal use.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the composite estimate</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getCompactSerializationBytes()">
<h3>getCompactSerializationBytes</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getCompactSerializationBytes</span>()</div>
<div class="block">Gets the size in bytes of the current sketch when serialized using
 <i>toCompactByteArray()</i>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the size in bytes of the current sketch when serialized using
 <i>toCompactByteArray()</i>.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getEstimate()">
<h3>getEstimate</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">getEstimate</span>()</div>
<div class="block">Return the cardinality estimate</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the cardinality estimate</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getLgConfigK()">
<h3>getLgConfigK</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getLgConfigK</span>()</div>
<div class="block">Gets the effective <i>lgConfigK</i> for the union operator, which may be less than
 <i>lgMaxK</i>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the <i>lgConfigK</i>.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getLowerBound(int)">
<h3>getLowerBound</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">getLowerBound</span><wbr><span class="parameters">(int&nbsp;numStdDev)</span></div>
<div class="block">Gets the approximate lower error bound given the specified number of Standard Deviations.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>numStdDev</code> - This must be an integer between 1 and 3, inclusive.
 <a href="../../../../resources/dictionary.html#numStdDev">See Number of Standard Deviations</a></dd>
<dt>Returns:</dt>
<dd>the lower bound.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getMaxSerializationBytes(int)">
<h3>getMaxSerializationBytes</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getMaxSerializationBytes</span><wbr><span class="parameters">(int&nbsp;lgK)</span></div>
<div class="block">Returns the maximum size in bytes that this union operator can grow to given a lgK.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>lgK</code> - The maximum Log2 of K for this union operator. This value must be
 between 4 and 21 inclusively.</dd>
<dt>Returns:</dt>
<dd>the maximum size in bytes that this union operator can grow to.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getResult()">
<h3>getResult</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="HllSketch.html" title="class in org.apache.datasketches.hll">HllSketch</a></span>&nbsp;<span class="element-name">getResult</span>()</div>
<div class="block">Return the result of this union operator as an HLL_4 sketch.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the result of this union operator as an HLL_4 sketch.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getResult(org.apache.datasketches.hll.TgtHllType)">
<h3>getResult</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="HllSketch.html" title="class in org.apache.datasketches.hll">HllSketch</a></span>&nbsp;<span class="element-name">getResult</span><wbr><span class="parameters">(<a href="TgtHllType.html" title="enum class in org.apache.datasketches.hll">TgtHllType</a>&nbsp;tgtHllType)</span></div>
<div class="block">Return the result of this union operator with the specified <a href="TgtHllType.html" title="enum class in org.apache.datasketches.hll"><code>TgtHllType</code></a></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>tgtHllType</code> - the TgtHllType enum</dd>
<dt>Returns:</dt>
<dd>the result of this union operator with the specified TgtHllType</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getTgtHllType()">
<h3>getTgtHllType</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="TgtHllType.html" title="enum class in org.apache.datasketches.hll">TgtHllType</a></span>&nbsp;<span class="element-name">getTgtHllType</span>()</div>
<div class="block">Gets the <a href="TgtHllType.html" title="enum class in org.apache.datasketches.hll"><code>TgtHllType</code></a></div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the TgtHllType enum value</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getUpdatableSerializationBytes()">
<h3>getUpdatableSerializationBytes</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getUpdatableSerializationBytes</span>()</div>
<div class="block">Gets the size in bytes of the current sketch when serialized using
 <i>toUpdatableByteArray()</i>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the size in bytes of the current sketch when serialized using
 <i>toUpdatableByteArray()</i>.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getUpperBound(int)">
<h3>getUpperBound</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">getUpperBound</span><wbr><span class="parameters">(int&nbsp;numStdDev)</span></div>
<div class="block">Gets the approximate upper error bound given the specified number of Standard Deviations.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>numStdDev</code> - This must be an integer between 1 and 3, inclusive.
 <a href="../../../../resources/dictionary.html#numStdDev">Number of Standard Deviations</a></dd>
<dt>Returns:</dt>
<dd>the upper bound.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="isCompact()">
<h3>isCompact</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isCompact</span>()</div>
<div class="block">Returns true if the backing MemorySegment of this sketch is in compact form.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true if the backing MemorySegment of this sketch is in compact form.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="isEmpty()">
<h3>isEmpty</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isEmpty</span>()</div>
<div class="block">Returns true if empty</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true if empty</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="hasMemorySegment()">
<h3>hasMemorySegment</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">hasMemorySegment</span>()</div>
<div class="block">Returns true if this sketch was created using MemorySegment.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../common/MemorySegmentStatus.html#hasMemorySegment()">hasMemorySegment</a></code>&nbsp;in interface&nbsp;<code><a href="../common/MemorySegmentStatus.html" title="interface in org.apache.datasketches.common">MemorySegmentStatus</a></code></dd>
<dt>Returns:</dt>
<dd>true if this sketch was created using MemorySegment.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="isOffHeap()">
<h3>isOffHeap</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isOffHeap</span>()</div>
<div class="block">Returns true if the backing MemorySegment for this sketch is off-heap.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../common/MemorySegmentStatus.html#isOffHeap()">isOffHeap</a></code>&nbsp;in interface&nbsp;<code><a href="../common/MemorySegmentStatus.html" title="interface in org.apache.datasketches.common">MemorySegmentStatus</a></code></dd>
<dt>Returns:</dt>
<dd>true if the backing MemorySegment for this sketch is off-heap.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="isSameResource(java.lang.foreign.MemorySegment)">
<h3>isSameResource</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isSameResource</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/foreign/MemorySegment.html" title="class or interface in java.lang.foreign" class="external-link">MemorySegment</a>&nbsp;seg)</span></div>
<div class="block">Returns true if the given MemorySegment refers to the same underlying resource as this sketch.
 The capacities must be the same.  If <i>this</i> is a region,
 the region offset must also be the same.

 <p>This is only relevant for HLL_4 sketches that have been configured for off-heap
 using MemorySegment.  For on-heap sketches or unions this will return false.

 <p>It is rare, but possible, the the off-heap MemorySegment that has been allocated to an HLL_4
 sketch may not be large enough. If this should happen, the sketch makes a request for more
 space from the owner of the resource and then moves itself to this new location. This all
 happens transparently to the user. This method provides a means for the user to
 inquire of the sketch if it has, in fact, moved itself.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../common/MemorySegmentStatus.html#isSameResource(java.lang.foreign.MemorySegment)">isSameResource</a></code>&nbsp;in interface&nbsp;<code><a href="../common/MemorySegmentStatus.html" title="interface in org.apache.datasketches.common">MemorySegmentStatus</a></code></dd>
<dt>Parameters:</dt>
<dd><code>seg</code> - the given MemorySegment</dd>
<dt>Returns:</dt>
<dd>true if the given MemorySegment refers to the same underlying resource as this sketch or
 union.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="reset()">
<h3>reset</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">reset</span>()</div>
<div class="block">Resets to empty and retains the current lgK, but does not change the configured value of
 lgMaxK.</div>
</div>
</section>
</li>
<li>
<section class="detail" id="toCompactByteArray()">
<h3>toCompactByteArray</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">byte[]</span>&nbsp;<span class="element-name">toCompactByteArray</span>()</div>
<div class="block">Gets the serialization of this union operator as a byte array in compact form, which is
 designed to be heapified only. It is not directly updatable.
 For the Union operator, this is the serialization of the internal state of
 the union operator as a sketch.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the serialization of this union operator as a byte array.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="toUpdatableByteArray()">
<h3>toUpdatableByteArray</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">byte[]</span>&nbsp;<span class="element-name">toUpdatableByteArray</span>()</div>
<div class="block">Serializes this sketch as a byte array in an updatable form. The updatable form is larger than
 the compact form. The use of this form is primarily in environments that support updating
 sketches in off-heap MemorySegment. If the sketch is constructed using HLL_8, sketch updating and
 union updating operations can actually occur in MemorySegment, which can be off-heap:
 <pre><code>
     Union union; HllSketch sk;
     int lgK = 12;
     sk = new HllSketch(lgK, TgtHllType.HLL_8) //must be 8
     for (int i = 0; i &lt; (2 &lt;&lt; lgK); i++) { sk.update(i); }
     byte[] arr = sk.toUpdatableByteArray();
     MemorySegment wseg = MemorySegment.wrap(arr);
     //...
     union = Union.writableWrap(wseg); //no deserialization!
 </code></pre></div>
<dl class="notes">
<dt>Returns:</dt>
<dd>this sketch as an updatable byte array.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="toString(boolean,boolean,boolean,boolean)">
<h3>toString</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">toString</span><wbr><span class="parameters">(boolean&nbsp;summary,
 boolean&nbsp;hllDetail,
 boolean&nbsp;auxDetail,
 boolean&nbsp;all)</span></div>
<div class="block">Human readable summary with optional detail</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>summary</code> - if true, output the sketch summary</dd>
<dd><code>hllDetail</code> - if true, output the internal data array</dd>
<dd><code>auxDetail</code> - if true, output the internal Aux array, if it exists.</dd>
<dd><code>all</code> - if true, outputs all entries including empty ones</dd>
<dt>Returns:</dt>
<dd>human readable string with optional detail.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="update(org.apache.datasketches.hll.HllSketch)">
<h3>update</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">update</span><wbr><span class="parameters">(<a href="HllSketch.html" title="class in org.apache.datasketches.hll">HllSketch</a>&nbsp;sketch)</span></div>
<div class="block">Update this union operator with the given sketch.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>sketch</code> - the given sketch.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getSerializationVersion()">
<h3>getSerializationVersion</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getSerializationVersion</span>()</div>
<div class="block">Returns the current serialization version.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the current serialization version.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getSerializationVersion(java.lang.foreign.MemorySegment)">
<h3>getSerializationVersion</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getSerializationVersion</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/foreign/MemorySegment.html" title="class or interface in java.lang.foreign" class="external-link">MemorySegment</a>&nbsp;seg)</span></div>
<div class="block">Returns the current serialization version of the given MemorySegment.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>seg</code> - the given MemorySegment containing a serialized HllSketch image.</dd>
<dt>Returns:</dt>
<dd>the current serialization version.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getRelErr(boolean,boolean,int,int)">
<h3>getRelErr</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">getRelErr</span><wbr><span class="parameters">(boolean&nbsp;upperBound,
 boolean&nbsp;oooFlag,
 int&nbsp;lgConfigK,
 int&nbsp;numStdDev)</span></div>
<div class="block">Gets the current (approximate) Relative Error (RE) asymptotic values given several
 parameters. This is used primarily for testing.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>upperBound</code> - return the RE for the Upper Bound, otherwise for the Lower Bound.</dd>
<dd><code>oooFlag</code> - set true if the sketch is the result of a non qualifying union operation.</dd>
<dd><code>lgConfigK</code> - the configured value for the sketch.</dd>
<dd><code>numStdDev</code> - the given number of Standard Deviations. This must be an integer between
 1 and 3, inclusive.
 <a href="../../../../resources/dictionary.html#numStdDev">Number of Standard Deviations</a></dd>
<dt>Returns:</dt>
<dd>the current (approximate) RelativeError</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="isEstimationMode()">
<h3>isEstimationMode</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isEstimationMode</span>()</div>
<div class="block">This HLL family of sketches and operators is always estimating, even for very small values.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="toString()">
<h3>toString</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">toString</span>()</div>
<div class="block">Human readable summary as a string.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></dd>
<dt>Returns:</dt>
<dd>Human readable summary as a string.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="toString(boolean,boolean,boolean)">
<h3>toString</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">toString</span><wbr><span class="parameters">(boolean&nbsp;summary,
 boolean&nbsp;detail,
 boolean&nbsp;auxDetail)</span></div>
<div class="block">Human readable summary with optional detail. Does not list empty entries.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>summary</code> - if true, output the sketch summary</dd>
<dd><code>detail</code> - if true, output the internal data array</dd>
<dd><code>auxDetail</code> - if true, output the internal Aux array, if it exists.</dd>
<dt>Returns:</dt>
<dd>human readable string with optional detail.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="update(long)">
<h3>update</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">update</span><wbr><span class="parameters">(long&nbsp;datum)</span></div>
<div class="block">Present the given long as a potential unique item.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>datum</code> - The given long datum.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="update(double)">
<h3>update</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">update</span><wbr><span class="parameters">(double&nbsp;datum)</span></div>
<div class="block">Present the given double (or float) datum as a potential unique item.
 The double will be converted to a long using Double.doubleToLongBits(datum),
 which normalizes all NaN values to a single NaN representation.
 Plus and minus zero will be normalized to plus zero.
 The special floating-point values NaN and +/- Infinity are treated as distinct.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>datum</code> - The given double datum.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="update(java.lang.String)">
<h3>update</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">update</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;datum)</span></div>
<div class="block">Present the given String as a potential unique item.
 The string is converted to a byte array using UTF8 encoding.
 If the string is null or empty no update attempt is made and the method returns.

 <p>Note: About 2X faster performance can be obtained by first converting the String to a
 char[] and updating the sketch with that. This bypasses the complexity of the Java UTF_8
 encoding. This, of course, will not produce the same internal hash values as updating directly
 with a String. So be consistent!  Unioning two sketches, one fed with strings and the other
 fed with char[] will be meaningless.
 </p></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>datum</code> - The given String.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="update(java.nio.ByteBuffer)">
<h3>update</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">update</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/nio/ByteBuffer.html" title="class or interface in java.nio" class="external-link">ByteBuffer</a>&nbsp;data)</span></div>
<div class="block">Present the given byte buffer as a potential unique item.
 Bytes are read from the current position of the buffer until its limit.
 If the byte buffer is null or has no bytes remaining, no update attempt is made and the method returns.

 <p>This method will not modify the position, mark, limit, or byte order of the buffer.</p>

 <p>Little-endian order is preferred, but not required. This method may perform better if the provided byte
 buffer is in little-endian order.</p></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>data</code> - The given byte buffer.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="update(byte[])">
<h3>update</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">update</span><wbr><span class="parameters">(byte[]&nbsp;data)</span></div>
<div class="block">Present the given byte array as a potential unique item.
 If the byte array is null or empty no update attempt is made and the method returns.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>data</code> - The given byte array.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="update(char[])">
<h3>update</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">update</span><wbr><span class="parameters">(char[]&nbsp;data)</span></div>
<div class="block">Present the given char array as a potential unique item.
 If the char array is null or empty no update attempt is made and the method returns.

 <p>Note: this will not produce the same output hash values as the <i>update(String)</i>
 method but will be a little faster as it avoids the complexity of the UTF8 encoding.</p></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>data</code> - The given char array.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="update(int[])">
<h3>update</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">update</span><wbr><span class="parameters">(int[]&nbsp;data)</span></div>
<div class="block">Present the given integer array as a potential unique item.
 If the integer array is null or empty no update attempt is made and the method returns.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>data</code> - The given int array.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="update(long[])">
<h3>update</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">update</span><wbr><span class="parameters">(long[]&nbsp;data)</span></div>
<div class="block">Present the given long array as a potential unique item.
 If the long array is null or empty no update attempt is made and the method returns.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>data</code> - The given long array.</dd>
</dl>
</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2015&#x2013;2024 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</footer>
</main>
</div>
</body>
</html>
