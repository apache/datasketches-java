<!DOCTYPE HTML>
<html lang>
<head>
<!-- Generated by javadoc (17) -->
<title>ThetaUtil (datasketches-java 7.0.1 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: org.apache.datasketches.thetacommon, class: ThetaUtil">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/ThetaUtil.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.datasketches.thetacommon</a></div>
<h1 title="Class ThetaUtil" class="title">Class ThetaUtil</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">org.apache.datasketches.thetacommon.ThetaUtil</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="modifiers">public final class </span><span class="element-name type-name-label">ThetaUtil</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">Utility methods for the Theta Family of sketches</div>
<dl class="notes">
<dt>Author:</dt>
<dd>Lee Rhodes</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static final int</code></div>
<div class="col-second even-row-color"><code><a href="#DEFAULT_NOMINAL_ENTRIES" class="member-name-link">DEFAULT_NOMINAL_ENTRIES</a></code></div>
<div class="col-last even-row-color">
<div class="block">The default nominal entries is provided as a convenience for those cases where the
 nominal sketch size in number of entries is not provided.</div>
</div>
<div class="col-first odd-row-color"><code>static final long</code></div>
<div class="col-second odd-row-color"><code><a href="#DEFAULT_UPDATE_SEED" class="member-name-link">DEFAULT_UPDATE_SEED</a></code></div>
<div class="col-last odd-row-color">
<div class="block">The seed 9001 used in the sketch update methods is a prime number that
 was chosen very early on in experimental testing.</div>
</div>
<div class="col-first even-row-color"><code>static final int</code></div>
<div class="col-second even-row-color"><code><a href="#MAX_LG_NOM_LONGS" class="member-name-link">MAX_LG_NOM_LONGS</a></code></div>
<div class="col-last even-row-color">
<div class="block">The largest Log2 nom entries allowed: 26.</div>
</div>
<div class="col-first odd-row-color"><code>static final int</code></div>
<div class="col-second odd-row-color"><code><a href="#MIN_LG_ARR_LONGS" class="member-name-link">MIN_LG_ARR_LONGS</a></code></div>
<div class="col-last odd-row-color">
<div class="block">The smallest Log2 cache size allowed: 5.</div>
</div>
<div class="col-first even-row-color"><code>static final int</code></div>
<div class="col-second even-row-color"><code><a href="#MIN_LG_NOM_LONGS" class="member-name-link">MIN_LG_NOM_LONGS</a></code></div>
<div class="col-last even-row-color">
<div class="block">The smallest Log2 nom entries allowed: 4.</div>
</div>
<div class="col-first odd-row-color"><code>static final double</code></div>
<div class="col-second odd-row-color"><code><a href="#REBUILD_THRESHOLD" class="member-name-link">REBUILD_THRESHOLD</a></code></div>
<div class="col-last odd-row-color">
<div class="block">The hash table rebuild threshold = 15.0/16.0.</div>
</div>
<div class="col-first even-row-color"><code>static final double</code></div>
<div class="col-second even-row-color"><code><a href="#RESIZE_THRESHOLD" class="member-name-link">RESIZE_THRESHOLD</a></code></div>
<div class="col-last even-row-color">
<div class="block">The resize threshold = 0.5; tuned for speed.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#checkNomLongs(int)" class="member-name-link">checkNomLongs</a><wbr>(int&nbsp;nomLongs)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Checks that the given nomLongs is within bounds and returns the Log2 of the ceiling power of 2
 of the given nomLongs.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static short</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#checkSeedHashes(short,short)" class="member-name-link">checkSeedHashes</a><wbr>(short&nbsp;seedHashA,
 short&nbsp;seedHashB)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Check if the two seed hashes are equal.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static short</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#computeSeedHash(long)" class="member-name-link">computeSeedHash</a><wbr>(long&nbsp;seed)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Computes and checks the 16-bit seed hash from the given long seed.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#startingSubMultiple(int,int,int)" class="member-name-link">startingSubMultiple</a><wbr>(int&nbsp;lgTarget,
 int&nbsp;lgRF,
 int&nbsp;lgMin)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Gets the smallest allowed exponent of 2 that it is a sub-multiple of the target by zero,
 one or more resize factors.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="MIN_LG_NOM_LONGS">
<h3>MIN_LG_NOM_LONGS</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">MIN_LG_NOM_LONGS</span></div>
<div class="block">The smallest Log2 nom entries allowed: 4.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#org.apache.datasketches.thetacommon.ThetaUtil.MIN_LG_NOM_LONGS">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="MAX_LG_NOM_LONGS">
<h3>MAX_LG_NOM_LONGS</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">MAX_LG_NOM_LONGS</span></div>
<div class="block">The largest Log2 nom entries allowed: 26.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#org.apache.datasketches.thetacommon.ThetaUtil.MAX_LG_NOM_LONGS">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="REBUILD_THRESHOLD">
<h3>REBUILD_THRESHOLD</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">REBUILD_THRESHOLD</span></div>
<div class="block">The hash table rebuild threshold = 15.0/16.0.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#org.apache.datasketches.thetacommon.ThetaUtil.REBUILD_THRESHOLD">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="RESIZE_THRESHOLD">
<h3>RESIZE_THRESHOLD</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">RESIZE_THRESHOLD</span></div>
<div class="block">The resize threshold = 0.5; tuned for speed.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#org.apache.datasketches.thetacommon.ThetaUtil.RESIZE_THRESHOLD">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="DEFAULT_NOMINAL_ENTRIES">
<h3>DEFAULT_NOMINAL_ENTRIES</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">DEFAULT_NOMINAL_ENTRIES</span></div>
<div class="block">The default nominal entries is provided as a convenience for those cases where the
 nominal sketch size in number of entries is not provided.
 A sketch of 4096 entries has a Relative Standard Error (RSE) of +/- 1.56% at a confidence of
 68%; or equivalently, a Relative Error of +/- 3.1% at a confidence of 95.4%.
 <a href="../../../../resources/dictionary.html#defaultNomEntries">See Default Nominal Entries</a></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#org.apache.datasketches.thetacommon.ThetaUtil.DEFAULT_NOMINAL_ENTRIES">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="DEFAULT_UPDATE_SEED">
<h3>DEFAULT_UPDATE_SEED</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">DEFAULT_UPDATE_SEED</span></div>
<div class="block">The seed 9001 used in the sketch update methods is a prime number that
 was chosen very early on in experimental testing. Choosing a seed is somewhat arbitrary, and
 the author cannot prove that this particular seed is somehow superior to other seeds.  There
 was some early Internet discussion that a seed of 0 did not produce as clean avalanche diagrams
 as non-zero seeds, but this may have been more related to the MurmurHash2 release, which did
 have some issues. As far as the author can determine, MurmurHash3 does not have these problems.

 <p>In order to perform set operations on two sketches it is critical that the same hash
 function and seed are identical for both sketches, otherwise the assumed 1:1 relationship
 between the original source key value and the hashed bit string would be violated. Once
 you have developed a history of stored sketches you are stuck with it.

 <p><b>WARNING:</b> This seed is used internally by library sketches in different
 packages and thus must be declared public. However, this seed value must not be used by library
 users with the MurmurHash3 function. It should be viewed as existing for exclusive, private
 use by the library.

 <p><a href="../../../../resources/dictionary.html#defaultUpdateSeed">See Default Update Seed</a></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#org.apache.datasketches.thetacommon.ThetaUtil.DEFAULT_UPDATE_SEED">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="MIN_LG_ARR_LONGS">
<h3>MIN_LG_ARR_LONGS</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">MIN_LG_ARR_LONGS</span></div>
<div class="block">The smallest Log2 cache size allowed: 5.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#org.apache.datasketches.thetacommon.ThetaUtil.MIN_LG_ARR_LONGS">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="checkSeedHashes(short,short)">
<h3>checkSeedHashes</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">short</span>&nbsp;<span class="element-name">checkSeedHashes</span><wbr><span class="parameters">(short&nbsp;seedHashA,
 short&nbsp;seedHashB)</span></div>
<div class="block">Check if the two seed hashes are equal. If not, throw an SketchesArgumentException.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>seedHashA</code> - the seedHash A</dd>
<dd><code>seedHashB</code> - the seedHash B</dd>
<dt>Returns:</dt>
<dd>seedHashA if they are equal</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="computeSeedHash(long)">
<h3>computeSeedHash</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">short</span>&nbsp;<span class="element-name">computeSeedHash</span><wbr><span class="parameters">(long&nbsp;seed)</span></div>
<div class="block">Computes and checks the 16-bit seed hash from the given long seed.
 The seed hash may not be zero in order to maintain compatibility with older serialized
 versions that did not have this concept.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>seed</code> - <a href="../../../../resources/dictionary.html#seed">See Update Hash Seed</a></dd>
<dt>Returns:</dt>
<dd>the seed hash.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="startingSubMultiple(int,int,int)">
<h3>startingSubMultiple</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">startingSubMultiple</span><wbr><span class="parameters">(int&nbsp;lgTarget,
 int&nbsp;lgRF,
 int&nbsp;lgMin)</span></div>
<div class="block">Gets the smallest allowed exponent of 2 that it is a sub-multiple of the target by zero,
 one or more resize factors.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>lgTarget</code> - Log2 of the target size</dd>
<dd><code>lgRF</code> - Log_base2 of Resize Factor.
 <a href="../../../../resources/dictionary.html#resizeFactor">See Resize Factor</a></dd>
<dd><code>lgMin</code> - Log2 of the minimum allowed starting size</dd>
<dt>Returns:</dt>
<dd>The Log2 of the starting size</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="checkNomLongs(int)">
<h3>checkNomLongs</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">checkNomLongs</span><wbr><span class="parameters">(int&nbsp;nomLongs)</span></div>
<div class="block">Checks that the given nomLongs is within bounds and returns the Log2 of the ceiling power of 2
 of the given nomLongs.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>nomLongs</code> - the given number of nominal longs.  This can be any value from 16 to
 67108864, inclusive.</dd>
<dt>Returns:</dt>
<dd>The Log2 of the ceiling power of 2 of the given nomLongs.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2015&#x2013;2024 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
