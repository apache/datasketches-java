<!DOCTYPE HTML>
<!-- NewPage -->
<html lang>
<head>
<!-- Generated by javadoc -->
<title>CpcSketch (datasketches-java 6.2.0-SNAPSHOT API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../jquery/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-ui.min.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="CpcSketch (datasketches-java 6.2.0-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":9,"i2":10,"i3":10,"i4":9,"i5":10,"i6":9,"i7":9,"i8":9,"i9":9,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":9,"i16":9,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/CpcSketch.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.apache.datasketches.cpc</a></div>
<h2 title="Class CpcSketch" class="title">Class CpcSketch</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.datasketches.cpc.CpcSketch</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<pre>public final class <span class="typeNameLabel">CpcSketch</span>
extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></pre>
<div class="block">This is a unique-counting sketch that implements the
 <i>Compressed Probabilistic Counting (CPC, a.k.a FM85)</i> algorithms developed by Kevin Lang in
 his paper
 <a href="https://arxiv.org/abs/1708.06839">Back to the Future: an Even More Nearly
 Optimal Cardinality Estimation Algorithm</a>.

 <p>This sketch is extremely space-efficient when serialized. In an apples-to-apples empirical
 comparison against compressed HyperLogLog sketches, this new algorithm simultaneously wins on
 the two dimensions of the space/accuracy tradeoff and produces sketches that are
 smaller than the entropy of HLL, so no possible implementation of compressed HLL can match its
 space efficiency for a given accuracy. As described in the paper this sketch implements a newly
 developed ICON estimator algorithm that survives unioning operations, another
 well-known estimator, the
 <a href="https://arxiv.org/abs/1306.3284">Historical Inverse Probability (HIP)</a> estimator
 does not.
 The update speed performance of this sketch is quite fast and is comparable to the speed of HLL.
 The unioning (merging) capability of this sketch also allows for merging of sketches with
 different configurations of K.

 <p>For additional security this sketch can be configured with a user-specified hash seed.</div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Lee Rhodes, Kevin Lang</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#DEFAULT_LG_K">DEFAULT_LG_K</a></span></code></th>
<td class="colLast">
<div class="block">The default Log_base2 of K</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E()">CpcSketch</a></span>()</code></th>
<td class="colLast">
<div class="block">Constructor with default log_base2 of k</div>
</td>
</tr>
<tr class="rowColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(int)">CpcSketch</a></span>&#8203;(int&nbsp;lgK)</code></th>
<td class="colLast">
<div class="block">Constructor with log_base2 of k.</div>
</td>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(int,long)">CpcSketch</a></span>&#8203;(int&nbsp;lgK,
         long&nbsp;seed)</code></th>
<td class="colLast">
<div class="block">Constructor with log_base2 of k and seed.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>double</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getEstimate()">getEstimate</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the best estimate of the cardinality of the sketch.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static <a href="../common/Family.html" title="enum in org.apache.datasketches.common">Family</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getFamily()">getFamily</a></span>()</code></th>
<td class="colLast">
<div class="block">Return the DataSketches identifier for this CPC family of sketches.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLgK()">getLgK</a></span>()</code></th>
<td class="colLast">
<div class="block">Return the parameter LgK.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>double</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLowerBound(int)">getLowerBound</a></span>&#8203;(int&nbsp;kappa)</code></th>
<td class="colLast">
<div class="block">Returns the best estimate of the lower bound of the confidence interval given <i>kappa</i>,
 the number of standard deviations from the mean.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMaxSerializedBytes(int)">getMaxSerializedBytes</a></span>&#8203;(int&nbsp;lgK)</code></th>
<td class="colLast">
<div class="block">The actual size of a compressed CPC sketch has a small random variance, but the following
 empirically measured size should be large enough for at least 99.9 percent of sketches.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>double</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getUpperBound(int)">getUpperBound</a></span>&#8203;(int&nbsp;kappa)</code></th>
<td class="colLast">
<div class="block">Returns the best estimate of the upper bound of the confidence interval given <i>kappa</i>,
 the number of standard deviations from the mean.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>static <a href="CpcSketch.html" title="class in org.apache.datasketches.cpc">CpcSketch</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#heapify(byte%5B%5D)">heapify</a></span>&#8203;(byte[]&nbsp;byteArray)</code></th>
<td class="colLast">
<div class="block">Return the given byte array as a CpcSketch on the Java heap using the DEFAULT_UPDATE_SEED.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>static <a href="CpcSketch.html" title="class in org.apache.datasketches.cpc">CpcSketch</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#heapify(byte%5B%5D,long)">heapify</a></span>&#8203;(byte[]&nbsp;byteArray,
       long&nbsp;seed)</code></th>
<td class="colLast">
<div class="block">Return the given byte array as a CpcSketch on the Java heap.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>static <a href="CpcSketch.html" title="class in org.apache.datasketches.cpc">CpcSketch</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#heapify(org.apache.datasketches.memory.Memory)">heapify</a></span>&#8203;(org.apache.datasketches.memory.Memory&nbsp;mem)</code></th>
<td class="colLast">
<div class="block">Return the given Memory as a CpcSketch on the Java heap using the DEFAULT_UPDATE_SEED.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>static <a href="CpcSketch.html" title="class in org.apache.datasketches.cpc">CpcSketch</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#heapify(org.apache.datasketches.memory.Memory,long)">heapify</a></span>&#8203;(org.apache.datasketches.memory.Memory&nbsp;mem,
       long&nbsp;seed)</code></th>
<td class="colLast">
<div class="block">Return the given Memory as a CpcSketch on the Java heap.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isEmpty()">isEmpty</a></span>()</code></th>
<td class="colLast">
<div class="block">Return true if this sketch is empty</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#reset()">reset</a></span>()</code></th>
<td class="colLast">
<div class="block">Resets this sketch to empty but retains the original LgK and Seed.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>byte[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#toByteArray()">toByteArray</a></span>()</code></th>
<td class="colLast">
<div class="block">Return this sketch as a compressed byte array.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#toString()">toString</a></span>()</code></th>
<td class="colLast">
<div class="block">Return a human-readable string summary of this sketch</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#toString(boolean)">toString</a></span>&#8203;(boolean&nbsp;detail)</code></th>
<td class="colLast">
<div class="block">Return a human-readable string summary of this sketch</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#toString(byte%5B%5D,boolean)">toString</a></span>&#8203;(byte[]&nbsp;byteArr,
        boolean&nbsp;detail)</code></th>
<td class="colLast">
<div class="block">Returns a human readable string of the preamble of a byte array image of a CpcSketch.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#toString(org.apache.datasketches.memory.Memory,boolean)">toString</a></span>&#8203;(org.apache.datasketches.memory.Memory&nbsp;mem,
        boolean&nbsp;detail)</code></th>
<td class="colLast">
<div class="block">Returns a human readable string of the preamble of a Memory image of a CpcSketch.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#update(byte%5B%5D)">update</a></span>&#8203;(byte[]&nbsp;data)</code></th>
<td class="colLast">
<div class="block">Present the given byte array as a potential unique item.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#update(char%5B%5D)">update</a></span>&#8203;(char[]&nbsp;data)</code></th>
<td class="colLast">
<div class="block">Present the given char array as a potential unique item.</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#update(double)">update</a></span>&#8203;(double&nbsp;datum)</code></th>
<td class="colLast">
<div class="block">Present the given double (or float) datum as a potential unique item.</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#update(int%5B%5D)">update</a></span>&#8203;(int[]&nbsp;data)</code></th>
<td class="colLast">
<div class="block">Present the given integer array as a potential unique item.</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#update(long)">update</a></span>&#8203;(long&nbsp;datum)</code></th>
<td class="colLast">
<div class="block">Present the given long as a potential unique item.</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#update(long%5B%5D)">update</a></span>&#8203;(long[]&nbsp;data)</code></th>
<td class="colLast">
<div class="block">Present the given long array as a potential unique item.</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#update(java.lang.String)">update</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;datum)</code></th>
<td class="colLast">
<div class="block">Present the given String as a potential unique item.</div>
</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#update(java.nio.ByteBuffer)">update</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio" class="externalLink">ByteBuffer</a>&nbsp;data)</code></th>
<td class="colLast">
<div class="block">Present the given ByteBuffer as a potential unique item
 If the ByteBuffer is null or empty no update attempt is made and the method returns</div>
</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#validate()">validate</a></span>()</code></th>
<td class="colLast">
<div class="block">Convience function that this Sketch is valid.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang" class="externalLink">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang" class="externalLink">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang" class="externalLink">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang" class="externalLink">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang" class="externalLink">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang" class="externalLink">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang" class="externalLink">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang" class="externalLink">wait</a></code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a id="DEFAULT_LG_K">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DEFAULT_LG_K</h4>
<pre>public static final&nbsp;int DEFAULT_LG_K</pre>
<div class="block">The default Log_base2 of K</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.apache.datasketches.cpc.CpcSketch.DEFAULT_LG_K">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>CpcSketch</h4>
<pre>public&nbsp;CpcSketch()</pre>
<div class="block">Constructor with default log_base2 of k</div>
</li>
</ul>
<a id="&lt;init&gt;(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>CpcSketch</h4>
<pre>public&nbsp;CpcSketch&#8203;(int&nbsp;lgK)</pre>
<div class="block">Constructor with log_base2 of k.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>lgK</code> - the given log_base2 of k</dd>
</dl>
</li>
</ul>
<a id="&lt;init&gt;(int,long)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>CpcSketch</h4>
<pre>public&nbsp;CpcSketch&#8203;(int&nbsp;lgK,
                 long&nbsp;seed)</pre>
<div class="block">Constructor with log_base2 of k and seed.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>lgK</code> - the given log_base2 of k</dd>
<dd><code>seed</code> - the given seed</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="getEstimate()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEstimate</h4>
<pre class="methodSignature">public&nbsp;double&nbsp;getEstimate()</pre>
<div class="block">Returns the best estimate of the cardinality of the sketch.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the best estimate of the cardinality of the sketch.</dd>
</dl>
</li>
</ul>
<a id="getFamily()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFamily</h4>
<pre class="methodSignature">public static&nbsp;<a href="../common/Family.html" title="enum in org.apache.datasketches.common">Family</a>&nbsp;getFamily()</pre>
<div class="block">Return the DataSketches identifier for this CPC family of sketches.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the DataSketches identifier for this CPC family of sketches.</dd>
</dl>
</li>
</ul>
<a id="getLgK()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLgK</h4>
<pre class="methodSignature">public&nbsp;int&nbsp;getLgK()</pre>
<div class="block">Return the parameter LgK.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the parameter LgK.</dd>
</dl>
</li>
</ul>
<a id="getLowerBound(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLowerBound</h4>
<pre class="methodSignature">public&nbsp;double&nbsp;getLowerBound&#8203;(int&nbsp;kappa)</pre>
<div class="block">Returns the best estimate of the lower bound of the confidence interval given <i>kappa</i>,
 the number of standard deviations from the mean.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>kappa</code> - the given number of standard deviations from the mean: 1, 2 or 3.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the best estimate of the lower bound of the confidence interval given <i>kappa</i>.</dd>
</dl>
</li>
</ul>
<a id="getMaxSerializedBytes(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxSerializedBytes</h4>
<pre class="methodSignature">public static&nbsp;int&nbsp;getMaxSerializedBytes&#8203;(int&nbsp;lgK)</pre>
<div class="block">The actual size of a compressed CPC sketch has a small random variance, but the following
 empirically measured size should be large enough for at least 99.9 percent of sketches.

 <p>For small values of <i>n</i> the size can be much smaller.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>lgK</code> - the given value of lgK.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the estimated maximum compressed serialized size of a sketch.</dd>
</dl>
</li>
</ul>
<a id="getUpperBound(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUpperBound</h4>
<pre class="methodSignature">public&nbsp;double&nbsp;getUpperBound&#8203;(int&nbsp;kappa)</pre>
<div class="block">Returns the best estimate of the upper bound of the confidence interval given <i>kappa</i>,
 the number of standard deviations from the mean.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>kappa</code> - the given number of standard deviations from the mean: 1, 2 or 3.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the best estimate of the upper bound of the confidence interval given <i>kappa</i>.</dd>
</dl>
</li>
</ul>
<a id="heapify(org.apache.datasketches.memory.Memory)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>heapify</h4>
<pre class="methodSignature">public static&nbsp;<a href="CpcSketch.html" title="class in org.apache.datasketches.cpc">CpcSketch</a>&nbsp;heapify&#8203;(org.apache.datasketches.memory.Memory&nbsp;mem)</pre>
<div class="block">Return the given Memory as a CpcSketch on the Java heap using the DEFAULT_UPDATE_SEED.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>mem</code> - the given Memory</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the given Memory as a CpcSketch on the Java heap.</dd>
</dl>
</li>
</ul>
<a id="heapify(byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>heapify</h4>
<pre class="methodSignature">public static&nbsp;<a href="CpcSketch.html" title="class in org.apache.datasketches.cpc">CpcSketch</a>&nbsp;heapify&#8203;(byte[]&nbsp;byteArray)</pre>
<div class="block">Return the given byte array as a CpcSketch on the Java heap using the DEFAULT_UPDATE_SEED.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>byteArray</code> - the given byte array</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the given byte array as a CpcSketch on the Java heap.</dd>
</dl>
</li>
</ul>
<a id="heapify(org.apache.datasketches.memory.Memory,long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>heapify</h4>
<pre class="methodSignature">public static&nbsp;<a href="CpcSketch.html" title="class in org.apache.datasketches.cpc">CpcSketch</a>&nbsp;heapify&#8203;(org.apache.datasketches.memory.Memory&nbsp;mem,
                                long&nbsp;seed)</pre>
<div class="block">Return the given Memory as a CpcSketch on the Java heap.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>mem</code> - the given Memory</dd>
<dd><code>seed</code> - the seed used to create the original sketch from which the Memory was derived.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the given Memory as a CpcSketch on the Java heap.</dd>
</dl>
</li>
</ul>
<a id="heapify(byte[],long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>heapify</h4>
<pre class="methodSignature">public static&nbsp;<a href="CpcSketch.html" title="class in org.apache.datasketches.cpc">CpcSketch</a>&nbsp;heapify&#8203;(byte[]&nbsp;byteArray,
                                long&nbsp;seed)</pre>
<div class="block">Return the given byte array as a CpcSketch on the Java heap.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>byteArray</code> - the given byte array</dd>
<dd><code>seed</code> - the seed used to create the original sketch from which the byte array was derived.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the given byte array as a CpcSketch on the Java heap.</dd>
</dl>
</li>
</ul>
<a id="isEmpty()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isEmpty</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;isEmpty()</pre>
<div class="block">Return true if this sketch is empty</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if this sketch is empty</dd>
</dl>
</li>
</ul>
<a id="reset()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reset</h4>
<pre class="methodSignature">public final&nbsp;void&nbsp;reset()</pre>
<div class="block">Resets this sketch to empty but retains the original LgK and Seed.</div>
</li>
</ul>
<a id="toByteArray()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toByteArray</h4>
<pre class="methodSignature">public&nbsp;byte[]&nbsp;toByteArray()</pre>
<div class="block">Return this sketch as a compressed byte array.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>this sketch as a compressed byte array.</dd>
</dl>
</li>
</ul>
<a id="update(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>update</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;update&#8203;(long&nbsp;datum)</pre>
<div class="block">Present the given long as a potential unique item.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>datum</code> - The given long datum.</dd>
</dl>
</li>
</ul>
<a id="update(double)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>update</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;update&#8203;(double&nbsp;datum)</pre>
<div class="block">Present the given double (or float) datum as a potential unique item.
 The double will be converted to a long using Double.doubleToLongBits(datum),
 which normalizes all NaN values to a single NaN representation.
 Plus and minus zero will be normalized to plus zero.
 The special floating-point values NaN and +/- Infinity are treated as distinct.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>datum</code> - The given double datum.</dd>
</dl>
</li>
</ul>
<a id="update(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>update</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;update&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;datum)</pre>
<div class="block">Present the given String as a potential unique item.
 The string is converted to a byte array using UTF8 encoding.
 If the string is null or empty no update attempt is made and the method returns.

 <p>Note: About 2X faster performance can be obtained by first converting the String to a
 char[] and updating the sketch with that. This bypasses the complexity of the Java UTF_8
 encoding. This, of course, will not produce the same internal hash values as updating directly
 with a String. So be consistent!  Unioning two sketches, one fed with strings and the other
 fed with char[] will be meaningless.
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>datum</code> - The given String.</dd>
</dl>
</li>
</ul>
<a id="update(byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>update</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;update&#8203;(byte[]&nbsp;data)</pre>
<div class="block">Present the given byte array as a potential unique item.
 If the byte array is null or empty no update attempt is made and the method returns.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>data</code> - The given byte array.</dd>
</dl>
</li>
</ul>
<a id="update(java.nio.ByteBuffer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>update</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;update&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio" class="externalLink">ByteBuffer</a>&nbsp;data)</pre>
<div class="block">Present the given ByteBuffer as a potential unique item
 If the ByteBuffer is null or empty no update attempt is made and the method returns</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>data</code> - The given ByteBuffer</dd>
</dl>
</li>
</ul>
<a id="update(char[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>update</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;update&#8203;(char[]&nbsp;data)</pre>
<div class="block">Present the given char array as a potential unique item.
 If the char array is null or empty no update attempt is made and the method returns.

 <p>Note: this will not produce the same output hash values as the <a href="#update(java.lang.String)"><code>update(String)</code></a>
 method but will be a little faster as it avoids the complexity of the UTF8 encoding.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>data</code> - The given char array.</dd>
</dl>
</li>
</ul>
<a id="update(int[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>update</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;update&#8203;(int[]&nbsp;data)</pre>
<div class="block">Present the given integer array as a potential unique item.
 If the integer array is null or empty no update attempt is made and the method returns.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>data</code> - The given int array.</dd>
</dl>
</li>
</ul>
<a id="update(long[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>update</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;update&#8203;(long[]&nbsp;data)</pre>
<div class="block">Present the given long array as a potential unique item.
 If the long array is null or empty no update attempt is made and the method returns.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>data</code> - The given long array.</dd>
</dl>
</li>
</ul>
<a id="validate()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>validate</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;validate()</pre>
<div class="block">Convience function that this Sketch is valid. This is a troubleshooting tool
 for sketches that have been heapified from serialized images.

 <p>If you are starting with a serialized image as a byte array, first heapify
 the byte array to a sketch, which performs a number of checks. Then use this
 function as one additional check on the sketch.</p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if this sketch is validated.</dd>
</dl>
</li>
</ul>
<a id="toString()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre class="methodSignature">public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;toString()</pre>
<div class="block">Return a human-readable string summary of this sketch</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang" class="externalLink">toString</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></code></dd>
</dl>
</li>
</ul>
<a id="toString(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre class="methodSignature">public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;toString&#8203;(boolean&nbsp;detail)</pre>
<div class="block">Return a human-readable string summary of this sketch</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>detail</code> - include data detail</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a human-readable string summary of this sketch</dd>
</dl>
</li>
</ul>
<a id="toString(byte[],boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre class="methodSignature">public static&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;toString&#8203;(byte[]&nbsp;byteArr,
                              boolean&nbsp;detail)</pre>
<div class="block">Returns a human readable string of the preamble of a byte array image of a CpcSketch.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>byteArr</code> - the given byte array</dd>
<dd><code>detail</code> - if true, a dump of the compressed window and surprising value streams will be
 included.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a human readable string of the preamble of a byte array image of a CpcSketch.</dd>
</dl>
</li>
</ul>
<a id="toString(org.apache.datasketches.memory.Memory,boolean)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>toString</h4>
<pre class="methodSignature">public static&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;toString&#8203;(org.apache.datasketches.memory.Memory&nbsp;mem,
                              boolean&nbsp;detail)</pre>
<div class="block">Returns a human readable string of the preamble of a Memory image of a CpcSketch.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>mem</code> - the given Memory</dd>
<dd><code>detail</code> - if true, a dump of the compressed window and surprising value streams will be
 included.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a human readable string of the preamble of a Memory image of a CpcSketch.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/CpcSketch.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2015&#x2013;2024 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</footer>
</body>
</html>
