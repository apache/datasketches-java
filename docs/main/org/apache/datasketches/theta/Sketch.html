<!DOCTYPE HTML>
<html lang>
<head>
<!-- Generated by javadoc (25) -->
<title>Sketch (datasketches-java 9.0.0-SNAPSHOT API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: org.apache.datasketches.theta, class: Sketch">
<meta name="generator" content="javadoc/ClassWriter">
<link rel="stylesheet" type="text/css" href="../../../../resource-files/jquery-ui.min.css">
<link rel="stylesheet" type="text/css" href="../../../../resource-files/stylesheet.css">
<script type="text/javascript" src="../../../../script-files/script.js"></script>
<script type="text/javascript" src="../../../../script-files/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../script-files/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">const pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="nav-content">
<div class="nav-menu-button"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button></div>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/Sketch.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../search.html">Search</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
</div>
<div class="sub-nav">
<div class="nav-content">
<ol class="sub-nav-list">
<li><a href="package-summary.html">org.apache.datasketches.theta</a></li>
<li><a href="Sketch.html" class="current-selection">Sketch</a></li>
</ol>
<div class="nav-list-search"><input type="text" id="search-input" disabled placeholder="Search documentation (type /)" aria-label="Search in documentation" autocomplete="off" spellcheck="false"><input type="reset" id="reset-search" disabled value="Reset"></div>
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="main-grid">
<nav role="navigation" class="toc" aria-label="Table of contents">
<div class="toc-header">Contents&nbsp;<input type="text" class="filter-input" disabled placeholder="Filter contents (type .)" aria-label="Filter table of contents" autocomplete="off" spellcheck="false"><input type="reset" class="reset-filter" disabled tabindex="-1" value="Reset"></div>
<ol class="toc-list" tabindex="-1">
<li><a href="#" tabindex="0">Description</a></li>
<li><a href="#method-summary" tabindex="0">Method Summary</a></li>
<li><a href="#method-detail" tabindex="0">Method Details</a>
<ol class="toc-list">
<li><a href="#heapify(java.lang.foreign.MemorySegment)" tabindex="0">heapify(MemorySegment)</a></li>
<li><a href="#heapify(java.lang.foreign.MemorySegment,long)" tabindex="0">heapify(MemorySegment, long)</a></li>
<li><a href="#wrap(java.lang.foreign.MemorySegment)" tabindex="0">wrap(MemorySegment)</a></li>
<li><a href="#wrap(java.lang.foreign.MemorySegment,long)" tabindex="0">wrap(MemorySegment, long)</a></li>
<li><a href="#compact()" tabindex="0">compact()</a></li>
<li><a href="#compact(boolean,java.lang.foreign.MemorySegment)" tabindex="0">compact(boolean, MemorySegment)</a></li>
<li><a href="#getCompactBytes()" tabindex="0">getCompactBytes()</a></li>
<li><a href="#getCountLessThanThetaLong(long)" tabindex="0">getCountLessThanThetaLong(long)</a></li>
<li><a href="#getCurrentBytes()" tabindex="0">getCurrentBytes()</a></li>
<li><a href="#getEstimate()" tabindex="0">getEstimate()</a></li>
<li><a href="#getEstimate(java.lang.foreign.MemorySegment)" tabindex="0">getEstimate(MemorySegment)</a></li>
<li><a href="#getFamily()" tabindex="0">getFamily()</a></li>
<li><a href="#getLowerBound(int)" tabindex="0">getLowerBound(int)</a></li>
<li><a href="#getMaxCompactSketchBytes(int)" tabindex="0">getMaxCompactSketchBytes(int)</a></li>
<li><a href="#getCompactSketchMaxBytes(int)" tabindex="0">getCompactSketchMaxBytes(int)</a></li>
<li><a href="#getMaxUpdateSketchBytes(int)" tabindex="0">getMaxUpdateSketchBytes(int)</a></li>
<li><a href="#getUpdateSketchMaxBytes(int)" tabindex="0">getUpdateSketchMaxBytes(int)</a></li>
<li><a href="#getRetainedEntries()" tabindex="0">getRetainedEntries()</a></li>
<li><a href="#getRetainedEntries(boolean)" tabindex="0">getRetainedEntries(boolean)</a></li>
<li><a href="#getRetainedEntries(java.lang.foreign.MemorySegment)" tabindex="0">getRetainedEntries(MemorySegment)</a></li>
<li><a href="#getSerializationVersion(java.lang.foreign.MemorySegment)" tabindex="0">getSerializationVersion(MemorySegment)</a></li>
<li><a href="#getTheta()" tabindex="0">getTheta()</a></li>
<li><a href="#getThetaLong()" tabindex="0">getThetaLong()</a></li>
<li><a href="#getUpperBound(int)" tabindex="0">getUpperBound(int)</a></li>
<li><a href="#isCompact()" tabindex="0">isCompact()</a></li>
<li><a href="#isEmpty()" tabindex="0">isEmpty()</a></li>
<li><a href="#isEstimationMode()" tabindex="0">isEstimationMode()</a></li>
<li><a href="#isOrdered()" tabindex="0">isOrdered()</a></li>
<li><a href="#iterator()" tabindex="0">iterator()</a></li>
<li><a href="#toByteArray()" tabindex="0">toByteArray()</a></li>
<li><a href="#toString()" tabindex="0">toString()</a></li>
<li><a href="#toString(boolean,boolean,int,boolean)" tabindex="0">toString(boolean, boolean, int, boolean)</a></li>
<li><a href="#toString(byte%5B%5D)" tabindex="0">toString(byte[])</a></li>
<li><a href="#toString(java.lang.foreign.MemorySegment)" tabindex="0">toString(MemorySegment)</a></li>
<li><a href="#getLowerBound(int,java.lang.foreign.MemorySegment)" tabindex="0">getLowerBound(int, MemorySegment)</a></li>
<li><a href="#getUpperBound(int,java.lang.foreign.MemorySegment)" tabindex="0">getUpperBound(int, MemorySegment)</a></li>
</ol>
</li>
</ol>
<button class="hide-sidebar"><span>Hide sidebar&nbsp;</span><img src="../../../../resource-files/left.svg" alt="Hide sidebar"></button><button class="show-sidebar"><img src="../../../../resource-files/right.svg" alt="Show sidebar"><span>&nbsp;Show sidebar</span></button></nav>
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<h1 title="Class Sketch" class="title">Class Sketch</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">org.apache.datasketches.theta.Sketch</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../common/MemorySegmentStatus.html" title="interface in org.apache.datasketches.common">MemorySegmentStatus</a></code></dd>
</dl>
<dl class="notes">
<dt>Direct Known Subclasses:</dt>
<dd><code><a href="CompactSketch.html" title="class in org.apache.datasketches.theta">CompactSketch</a>, <a href="UpdateSketch.html" title="class in org.apache.datasketches.theta">UpdateSketch</a></code></dd>
</dl>
<hr>
<div class="horizontal-scroll">
<div class="type-signature"><span class="modifiers">public abstract class </span><span class="element-name type-name-label">Sketch</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>
implements <a href="../common/MemorySegmentStatus.html" title="interface in org.apache.datasketches.common">MemorySegmentStatus</a></span></div>
<div class="block">The top-level class for all theta sketches. This class is never constructed directly.
Use the UpdateSketch.builder() methods to create UpdateSketches.</div>
<dl class="notes">
<dt>Author:</dt>
<dd>Lee Rhodes</dd>
</dl>
</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="CompactSketch.html" title="class in org.apache.datasketches.theta">CompactSketch</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#compact()" class="member-name-link">compact</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Converts this sketch to a ordered CompactSketch.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>abstract <a href="CompactSketch.html" title="class in org.apache.datasketches.theta">CompactSketch</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#compact(boolean,java.lang.foreign.MemorySegment)" class="member-name-link">compact</a><wbr>(boolean&nbsp;dstOrdered,
 <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/foreign/MemorySegment.html" title="class or interface in java.lang.foreign" class="external-link">MemorySegment</a>&nbsp;dstSeg)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Convert this sketch to a <i>CompactSketch</i>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>abstract int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getCompactBytes()" class="member-name-link">getCompactBytes</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns the number of storage bytes required for this Sketch if its current state were
compacted.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getCompactSketchMaxBytes(int)" class="member-name-link">getCompactSketchMaxBytes</a><wbr>(int&nbsp;lgNomEntries)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns the maximum number of storage bytes required for a CompactSketch given the configured
log_base2 of the number of nominal entries, which is a power of 2.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getCountLessThanThetaLong(long)" class="member-name-link">getCountLessThanThetaLong</a><wbr>(long&nbsp;thetaLong)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Gets the number of hash values less than the given theta expressed as a long.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>abstract int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getCurrentBytes()" class="member-name-link">getCurrentBytes</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns the number of storage bytes required for this sketch in its current state.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>abstract double</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getEstimate()" class="member-name-link">getEstimate</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Gets the unique count estimate.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static double</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getEstimate(java.lang.foreign.MemorySegment)" class="member-name-link">getEstimate</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/foreign/MemorySegment.html" title="class or interface in java.lang.foreign" class="external-link">MemorySegment</a>&nbsp;srcSeg)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Gets the estimate from the given MemorySegment</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>abstract <a href="../common/Family.html" title="enum class in org.apache.datasketches.common">Family</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getFamily()" class="member-name-link">getFamily</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns the Family that this sketch belongs to</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>double</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getLowerBound(int)" class="member-name-link">getLowerBound</a><wbr>(int&nbsp;numStdDev)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Gets the approximate lower error bound given the specified number of Standard Deviations.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static double</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getLowerBound(int,java.lang.foreign.MemorySegment)" class="member-name-link">getLowerBound</a><wbr>(int&nbsp;numStdDev,
 <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/foreign/MemorySegment.html" title="class or interface in java.lang.foreign" class="external-link">MemorySegment</a>&nbsp;srcSeg)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Gets the approximate lower error bound from a valid MemorySegment image of a Sketch
given the specified number of Standard Deviations.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getMaxCompactSketchBytes(int)" class="member-name-link">getMaxCompactSketchBytes</a><wbr>(int&nbsp;numberOfEntries)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns the maximum number of storage bytes required for a CompactSketch with the given
number of actual entries.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getMaxUpdateSketchBytes(int)" class="member-name-link">getMaxUpdateSketchBytes</a><wbr>(int&nbsp;nomEntries)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns the maximum number of storage bytes required for an UpdateSketch with the given
number of nominal entries (power of 2).</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getRetainedEntries()" class="member-name-link">getRetainedEntries</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the number of valid entries that have been retained by the sketch.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>abstract int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getRetainedEntries(boolean)" class="member-name-link">getRetainedEntries</a><wbr>(boolean&nbsp;valid)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns the number of entries that have been retained by the sketch.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getRetainedEntries(java.lang.foreign.MemorySegment)" class="member-name-link">getRetainedEntries</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/foreign/MemorySegment.html" title="class or interface in java.lang.foreign" class="external-link">MemorySegment</a>&nbsp;srcSeg)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns the number of valid entries that have been retained by the sketch from the given MemorySegment</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getSerializationVersion(java.lang.foreign.MemorySegment)" class="member-name-link">getSerializationVersion</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/foreign/MemorySegment.html" title="class or interface in java.lang.foreign" class="external-link">MemorySegment</a>&nbsp;seg)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns the serialization version from the given MemorySegment</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>double</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getTheta()" class="member-name-link">getTheta</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Gets the value of theta as a double with a value between zero and one</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>abstract long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getThetaLong()" class="member-name-link">getThetaLong</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Gets the value of theta as a long</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getUpdateSketchMaxBytes(int)" class="member-name-link">getUpdateSketchMaxBytes</a><wbr>(int&nbsp;lgNomEntries)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns the maximum number of storage bytes required for an UpdateSketch with the given
log_base2 of the nominal entries.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>double</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getUpperBound(int)" class="member-name-link">getUpperBound</a><wbr>(int&nbsp;numStdDev)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Gets the approximate upper error bound given the specified number of Standard Deviations.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static double</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getUpperBound(int,java.lang.foreign.MemorySegment)" class="member-name-link">getUpperBound</a><wbr>(int&nbsp;numStdDev,
 <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/foreign/MemorySegment.html" title="class or interface in java.lang.foreign" class="external-link">MemorySegment</a>&nbsp;srcSeg)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Gets the approximate upper error bound from a valid MemorySegment image of a Sketch
given the specified number of Standard Deviations.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="Sketch.html" title="class in org.apache.datasketches.theta">Sketch</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#heapify(java.lang.foreign.MemorySegment)" class="member-name-link">heapify</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/foreign/MemorySegment.html" title="class or interface in java.lang.foreign" class="external-link">MemorySegment</a>&nbsp;srcSeg)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Heapify takes the sketch image in MemorySegment and instantiates an on-heap Sketch.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="Sketch.html" title="class in org.apache.datasketches.theta">Sketch</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#heapify(java.lang.foreign.MemorySegment,long)" class="member-name-link">heapify</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/foreign/MemorySegment.html" title="class or interface in java.lang.foreign" class="external-link">MemorySegment</a>&nbsp;srcSeg,
 long&nbsp;expectedSeed)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Heapify takes the sketch image in MemorySegment and instantiates an on-heap Sketch.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>abstract boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#isCompact()" class="member-name-link">isCompact</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns true if this sketch is in compact form.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>abstract boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#isEmpty()" class="member-name-link">isEmpty</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block"><a href="../../../../resources/dictionary.html#empty">See Empty</a></div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isEstimationMode()" class="member-name-link">isEstimationMode</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns true if the sketch is Estimation Mode (as opposed to Exact Mode).</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>abstract boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#isOrdered()" class="member-name-link">isOrdered</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns true if internal cache is ordered</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>abstract <a href="HashIterator.html" title="interface in org.apache.datasketches.theta">HashIterator</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#iterator()" class="member-name-link">iterator</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns a HashIterator that can be used to iterate over the retained hash values of the
Theta sketch.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>abstract byte[]</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#toByteArray()" class="member-name-link">toByteArray</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Serialize this sketch to a byte array form.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#toString()" class="member-name-link">toString</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns a human readable summary of the sketch.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#toString(boolean,boolean,int,boolean)" class="member-name-link">toString</a><wbr>(boolean&nbsp;sketchSummary,
 boolean&nbsp;dataDetail,
 int&nbsp;width,
 boolean&nbsp;hexMode)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Gets a human readable listing of contents and summary of the given sketch.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#toString(byte%5B%5D)" class="member-name-link">toString</a><wbr>(byte[]&nbsp;byteArr)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns a human readable string of the preamble of a byte array image of a Theta Sketch.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#toString(java.lang.foreign.MemorySegment)" class="member-name-link">toString</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/foreign/MemorySegment.html" title="class or interface in java.lang.foreign" class="external-link">MemorySegment</a>&nbsp;seg)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns a human readable string of the preamble of a MemorySegment image of a Theta Sketch.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="Sketch.html" title="class in org.apache.datasketches.theta">Sketch</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#wrap(java.lang.foreign.MemorySegment)" class="member-name-link">wrap</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/foreign/MemorySegment.html" title="class or interface in java.lang.foreign" class="external-link">MemorySegment</a>&nbsp;srcSeg)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Wrap takes the sketch image in the given MemorySegment and refers to it directly.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="Sketch.html" title="class in org.apache.datasketches.theta">Sketch</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#wrap(java.lang.foreign.MemorySegment,long)" class="member-name-link">wrap</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/foreign/MemorySegment.html" title="class or interface in java.lang.foreign" class="external-link">MemorySegment</a>&nbsp;srcSeg,
 long&nbsp;expectedSeed)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Wrap takes the sketch image in the given MemorySegment and refers to it directly.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html#method-summary" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-org.apache.datasketches.common.MemorySegmentStatus">Methods inherited from interface&nbsp;<a href="../common/MemorySegmentStatus.html#method-summary" title="interface in org.apache.datasketches.common">MemorySegmentStatus</a></h3>
<code><a href="../common/MemorySegmentStatus.html#hasMemorySegment()" title="hasMemorySegment()">hasMemorySegment</a>, <a href="../common/MemorySegmentStatus.html#isOffHeap()" title="isOffHeap()">isOffHeap</a>, <a href="../common/MemorySegmentStatus.html#isSameResource(java.lang.foreign.MemorySegment)" title="isSameResource(MemorySegment)">isSameResource</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="heapify(java.lang.foreign.MemorySegment)">
<h3>heapify</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="Sketch.html" title="class in org.apache.datasketches.theta">Sketch</a></span>&nbsp;<span class="element-name">heapify</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/foreign/MemorySegment.html" title="class or interface in java.lang.foreign" class="external-link">MemorySegment</a>&nbsp;srcSeg)</span></div>
<div class="block">Heapify takes the sketch image in MemorySegment and instantiates an on-heap Sketch.

<p>The resulting sketch will not retain any link to the source MemorySegment.</p>

<p>For Update Sketches this method checks if the
<a href="../../../../resources/dictionary.html#defaultUpdateSeed">Default Update Seed</a></p>
was used to create the source MemorySegment image.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>srcSeg</code> - an image of a Sketch.</dd>
<dt>Returns:</dt>
<dd>a Sketch on the heap.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="heapify(java.lang.foreign.MemorySegment,long)">
<h3>heapify</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="Sketch.html" title="class in org.apache.datasketches.theta">Sketch</a></span>&nbsp;<span class="element-name">heapify</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/foreign/MemorySegment.html" title="class or interface in java.lang.foreign" class="external-link">MemorySegment</a>&nbsp;srcSeg,
 long&nbsp;expectedSeed)</span></div>
<div class="block">Heapify takes the sketch image in MemorySegment and instantiates an on-heap Sketch.

<p>The resulting sketch will not retain any link to the source MemorySegment.</p>

<p>For Update Sketches this method checks if the expectedSeed
was used to create the source MemorySegment image.</p></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>srcSeg</code> - an image of a Sketch that was created using the given expectedSeed.</dd>
<dd><code>expectedSeed</code> - the seed used to validate the given MemorySegment image.
 <a href="../../../../resources/dictionary.html#seed">See Update Hash Seed</a>.
Compact sketches store a 16-bit hash of the seed, but not the seed itself.</dd>
<dt>Returns:</dt>
<dd>a Sketch on the heap.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="wrap(java.lang.foreign.MemorySegment)">
<h3>wrap</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="Sketch.html" title="class in org.apache.datasketches.theta">Sketch</a></span>&nbsp;<span class="element-name">wrap</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/foreign/MemorySegment.html" title="class or interface in java.lang.foreign" class="external-link">MemorySegment</a>&nbsp;srcSeg)</span></div>
<div class="block">Wrap takes the sketch image in the given MemorySegment and refers to it directly.
There is no data copying onto the java heap.
The wrap operation enables fast read-only merging and access to all the public read-only API.

<p>Only sketches that have been explicitly stored as direct sketches can be wrapped.</p>

<p>Wrapping any subclass of this class that is empty or contains only a single item will
result in on-heap equivalent forms of empty and single item sketch respectively.
This is actually faster and consumes less overall space.</p>

<p>This method checks if the
<a href="../../../../resources/dictionary.html#defaultUpdateSeed">Default Update Seed</a>
was used to create the source MemorySegment image.</p></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>srcSeg</code> - a MemorySegment with an image of a Sketch.</dd>
<dt>Returns:</dt>
<dd>a read-only Sketch backed by the given MemorySegment</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="wrap(java.lang.foreign.MemorySegment,long)">
<h3>wrap</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="Sketch.html" title="class in org.apache.datasketches.theta">Sketch</a></span>&nbsp;<span class="element-name">wrap</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/foreign/MemorySegment.html" title="class or interface in java.lang.foreign" class="external-link">MemorySegment</a>&nbsp;srcSeg,
 long&nbsp;expectedSeed)</span></div>
<div class="block">Wrap takes the sketch image in the given MemorySegment and refers to it directly.
There is no data copying onto the java heap.
The wrap operation enables fast read-only merging and access to all the public read-only API.

<p>Only sketches that have been explicitly stored as direct sketches can be wrapped.</p>

<p>Wrapping any subclass of this class that is empty or contains only a single item will
result in on-heap equivalent forms of empty and single item sketch respectively.
This is actually faster and consumes less overall space.</p>

<p>This method checks if the given expectedSeed
was used to create the source MemorySegment image.</p></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>srcSeg</code> - a MemorySegment with an image of a Sketch.</dd>
<dd><code>expectedSeed</code> - the seed used to validate the given MemorySegment image.
<a href="../../../../resources/dictionary.html#seed">See Update Hash Seed</a>.</dd>
<dt>Returns:</dt>
<dd>a read-only Sketch backed by the given MemorySegment.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="compact()">
<h3>compact</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="CompactSketch.html" title="class in org.apache.datasketches.theta">CompactSketch</a></span>&nbsp;<span class="element-name">compact</span>()</div>
<div class="block">Converts this sketch to a ordered CompactSketch.

<p>If <i>this.isCompact() == true</i> this method returns <i>this</i>,
otherwise, this method is equivalent to
<a href="#compact(boolean,java.lang.foreign.MemorySegment)"><code>compact(true, null)</code></a>.

<p>A CompactSketch is always immutable.</p></div>
<dl class="notes">
<dt>Returns:</dt>
<dd>this sketch as an ordered CompactSketch.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="compact(boolean,java.lang.foreign.MemorySegment)">
<h3>compact</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public abstract</span>&nbsp;<span class="return-type"><a href="CompactSketch.html" title="class in org.apache.datasketches.theta">CompactSketch</a></span>&nbsp;<span class="element-name">compact</span><wbr><span class="parameters">(boolean&nbsp;dstOrdered,
 <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/foreign/MemorySegment.html" title="class or interface in java.lang.foreign" class="external-link">MemorySegment</a>&nbsp;dstSeg)</span></div>
<div class="block">Convert this sketch to a <i>CompactSketch</i>.

 <p>If this sketch is a type of <i>UpdateSketch</i>, the compacting process converts the hash table
 of the <i>UpdateSketch</i> to a simple list of the valid hash values.
 Any hash values of zero or equal-to or greater than theta will be discarded.
 The number of valid values remaining in the <i>CompactSketch</i> depends on a number of factors,
 but may be larger or smaller than <i>Nominal Entries</i> (or <i>k</i>).
 It will never exceed 2<i>k</i>.
 If it is critical to always limit the size to no more than <i>k</i>,
 then <i>rebuild()</i> should be called on the <i>UpdateSketch</i> prior to calling this method.</p>

 <p>A <i>CompactSketch</i> is always immutable.</p>

 <p>A new <i>CompactSketch</i> object is created:</p>
 <ul><li>if <i>dstSeg!= null</i></li>
 <li>if <i>dstSeg == null</i> and <i>this.hasMemorySegment() == true</i></li>
 <li>if <i>dstSeg == null</i> and <i>this</i> has more than 1 item and <i>this.isOrdered() == false</i>
 and <i>dstOrdered == true</i>.</li>
</ul>

 <p>Otherwise, this operation returns <i>this</i>.</p></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>dstOrdered</code> - assumed true if this sketch is empty or has only one value
 <a href="../../../../resources/dictionary.html#dstOrdered">See Destination Ordered</a></dd>
<dd><code>dstSeg</code> - <a href="../../../../resources/dictionary.html#dstSeg">See Destination MemorySegment</a>.</dd>
<dt>Returns:</dt>
<dd>this sketch as a <i>CompactSketch</i>.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getCompactBytes()">
<h3>getCompactBytes</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public abstract</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getCompactBytes</span>()</div>
<div class="block">Returns the number of storage bytes required for this Sketch if its current state were
compacted. It this sketch is already in the compact form this is equivalent to
calling <a href="#getCurrentBytes()"><code>getCurrentBytes()</code></a>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>number of compact bytes</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getCountLessThanThetaLong(long)">
<h3>getCountLessThanThetaLong</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getCountLessThanThetaLong</span><wbr><span class="parameters">(long&nbsp;thetaLong)</span></div>
<div class="block">Gets the number of hash values less than the given theta expressed as a long.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>thetaLong</code> - the given theta as a long between zero and <i>Long.MAX_VALUE</i>.</dd>
<dt>Returns:</dt>
<dd>the number of hash values less than the given thetaLong.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getCurrentBytes()">
<h3>getCurrentBytes</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public abstract</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getCurrentBytes</span>()</div>
<div class="block">Returns the number of storage bytes required for this sketch in its current state.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the number of storage bytes required for this sketch</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getEstimate()">
<h3>getEstimate</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public abstract</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">getEstimate</span>()</div>
<div class="block">Gets the unique count estimate.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the sketch's best estimate of the cardinality of the input stream.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getEstimate(java.lang.foreign.MemorySegment)">
<h3>getEstimate</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">getEstimate</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/foreign/MemorySegment.html" title="class or interface in java.lang.foreign" class="external-link">MemorySegment</a>&nbsp;srcSeg)</span></div>
<div class="block">Gets the estimate from the given MemorySegment</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>srcSeg</code> - the given MemorySegment</dd>
<dt>Returns:</dt>
<dd>the result estimate</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getFamily()">
<h3>getFamily</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public abstract</span>&nbsp;<span class="return-type"><a href="../common/Family.html" title="enum class in org.apache.datasketches.common">Family</a></span>&nbsp;<span class="element-name">getFamily</span>()</div>
<div class="block">Returns the Family that this sketch belongs to</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the Family that this sketch belongs to</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getLowerBound(int)">
<h3>getLowerBound</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">getLowerBound</span><wbr><span class="parameters">(int&nbsp;numStdDev)</span></div>
<div class="block">Gets the approximate lower error bound given the specified number of Standard Deviations.
This will return getEstimate() if isEmpty() is true.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>numStdDev</code> - <a href="../../../../resources/dictionary.html#numStdDev">See Number of Standard Deviations</a></dd>
<dt>Returns:</dt>
<dd>the lower bound.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getMaxCompactSketchBytes(int)">
<h3>getMaxCompactSketchBytes</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getMaxCompactSketchBytes</span><wbr><span class="parameters">(int&nbsp;numberOfEntries)</span></div>
<div class="block">Returns the maximum number of storage bytes required for a CompactSketch with the given
number of actual entries.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>numberOfEntries</code> - the actual number of retained entries stored in the sketch.</dd>
<dt>Returns:</dt>
<dd>the maximum number of storage bytes required for a CompactSketch with the given number
of retained entries.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getCompactSketchMaxBytes(int)">
<h3>getCompactSketchMaxBytes</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getCompactSketchMaxBytes</span><wbr><span class="parameters">(int&nbsp;lgNomEntries)</span></div>
<div class="block">Returns the maximum number of storage bytes required for a CompactSketch given the configured
log_base2 of the number of nominal entries, which is a power of 2.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>lgNomEntries</code> - <a href="../../../../resources/dictionary.html#nomEntries">Nominal Entries</a></dd>
<dt>Returns:</dt>
<dd>the maximum number of storage bytes required for a CompactSketch with the given
lgNomEntries.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getMaxUpdateSketchBytes(int)">
<h3>getMaxUpdateSketchBytes</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getMaxUpdateSketchBytes</span><wbr><span class="parameters">(int&nbsp;nomEntries)</span></div>
<div class="block">Returns the maximum number of storage bytes required for an UpdateSketch with the given
number of nominal entries (power of 2).</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>nomEntries</code> - <a href="../../../../resources/dictionary.html#nomEntries">Nominal Entries</a>
This will become the ceiling power of 2 if it is not.</dd>
<dt>Returns:</dt>
<dd>the maximum number of storage bytes required for a UpdateSketch with the given
nomEntries</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getUpdateSketchMaxBytes(int)">
<h3>getUpdateSketchMaxBytes</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getUpdateSketchMaxBytes</span><wbr><span class="parameters">(int&nbsp;lgNomEntries)</span></div>
<div class="block">Returns the maximum number of storage bytes required for an UpdateSketch with the given
log_base2 of the nominal entries.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>lgNomEntries</code> - log_base2 of <a href="../../../../resources/dictionary.html#nomEntries">Nominal Entries</a></dd>
<dt>Returns:</dt>
<dd>the maximum number of storage bytes required for a UpdateSketch with the given lgNomEntries</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getRetainedEntries()">
<h3>getRetainedEntries</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getRetainedEntries</span>()</div>
<div class="block">Returns the number of valid entries that have been retained by the sketch.
For the Alpha Sketch this returns only valid entries.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the number of valid retained entries.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getRetainedEntries(boolean)">
<h3>getRetainedEntries</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public abstract</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getRetainedEntries</span><wbr><span class="parameters">(boolean&nbsp;valid)</span></div>
<div class="block">Returns the number of entries that have been retained by the sketch.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>valid</code> - This parameter is only relevant for the Alpha Sketch.
if true, returns the number of valid entries, which are less than theta and used
for estimation. Otherwise, return the number of all entries, valid or not, that are currently in the
internal sketch cache.</dd>
<dt>Returns:</dt>
<dd>the number of retained entries</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getRetainedEntries(java.lang.foreign.MemorySegment)">
<h3>getRetainedEntries</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getRetainedEntries</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/foreign/MemorySegment.html" title="class or interface in java.lang.foreign" class="external-link">MemorySegment</a>&nbsp;srcSeg)</span></div>
<div class="block">Returns the number of valid entries that have been retained by the sketch from the given MemorySegment</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>srcSeg</code> - the given MemorySegment that has an image of a Sketch</dd>
<dt>Returns:</dt>
<dd>the number of valid retained entries</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getSerializationVersion(java.lang.foreign.MemorySegment)">
<h3>getSerializationVersion</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getSerializationVersion</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/foreign/MemorySegment.html" title="class or interface in java.lang.foreign" class="external-link">MemorySegment</a>&nbsp;seg)</span></div>
<div class="block">Returns the serialization version from the given MemorySegment</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>seg</code> - the sketch MemorySegment</dd>
<dt>Returns:</dt>
<dd>the serialization version from the MemorySegment</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getTheta()">
<h3>getTheta</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">getTheta</span>()</div>
<div class="block">Gets the value of theta as a double with a value between zero and one</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the value of theta as a double</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getThetaLong()">
<h3>getThetaLong</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public abstract</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getThetaLong</span>()</div>
<div class="block">Gets the value of theta as a long</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the value of theta as a long</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getUpperBound(int)">
<h3>getUpperBound</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">getUpperBound</span><wbr><span class="parameters">(int&nbsp;numStdDev)</span></div>
<div class="block">Gets the approximate upper error bound given the specified number of Standard Deviations.
This will return getEstimate() if isEmpty() is true.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>numStdDev</code> - <a href="../../../../resources/dictionary.html#numStdDev">See Number of Standard Deviations</a></dd>
<dt>Returns:</dt>
<dd>the upper bound.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="isCompact()">
<h3>isCompact</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public abstract</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isCompact</span>()</div>
<div class="block">Returns true if this sketch is in compact form.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true if this sketch is in compact form.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="isEmpty()">
<h3>isEmpty</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public abstract</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isEmpty</span>()</div>
<div class="block"><a href="../../../../resources/dictionary.html#empty">See Empty</a></div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true if empty.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="isEstimationMode()">
<h3>isEstimationMode</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isEstimationMode</span>()</div>
<div class="block">Returns true if the sketch is Estimation Mode (as opposed to Exact Mode).
This is true if theta &lt; 1.0 AND isEmpty() is false.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true if the sketch is in estimation mode.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="isOrdered()">
<h3>isOrdered</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public abstract</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isOrdered</span>()</div>
<div class="block">Returns true if internal cache is ordered</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true if internal cache is ordered</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="iterator()">
<h3>iterator</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public abstract</span>&nbsp;<span class="return-type"><a href="HashIterator.html" title="interface in org.apache.datasketches.theta">HashIterator</a></span>&nbsp;<span class="element-name">iterator</span>()</div>
<div class="block">Returns a HashIterator that can be used to iterate over the retained hash values of the
Theta sketch.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>a HashIterator that can be used to iterate over the retained hash values of the
Theta sketch.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="toByteArray()">
<h3>toByteArray</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public abstract</span>&nbsp;<span class="return-type">byte[]</span>&nbsp;<span class="element-name">toByteArray</span>()</div>
<div class="block">Serialize this sketch to a byte array form.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>byte array of this sketch</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="toString()">
<h3>toString</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">toString</span>()</div>
<div class="block">Returns a human readable summary of the sketch.  This method is equivalent to the parameterized
call:<br>
<i>Sketch.toString(sketch, true, false, 8, true);</i></div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></dd>
<dt>Returns:</dt>
<dd>summary</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="toString(boolean,boolean,int,boolean)">
<h3>toString</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">toString</span><wbr><span class="parameters">(boolean&nbsp;sketchSummary,
 boolean&nbsp;dataDetail,
 int&nbsp;width,
 boolean&nbsp;hexMode)</span></div>
<div class="block">Gets a human readable listing of contents and summary of the given sketch.
This can be a very long string.  If this sketch is in a "dirty" state there
may be values in the dataDetail view that are &ge; theta.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>sketchSummary</code> - If true the sketch summary will be output at the end.</dd>
<dd><code>dataDetail</code> - If true, includes all valid hash values in the sketch.</dd>
<dd><code>width</code> - The number of columns of hash values. Default is 8.</dd>
<dd><code>hexMode</code> - If true, hashes will be output in hex.</dd>
<dt>Returns:</dt>
<dd>The result string, which can be very long.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="toString(byte[])">
<h3>toString</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">toString</span><wbr><span class="parameters">(byte[]&nbsp;byteArr)</span></div>
<div class="block">Returns a human readable string of the preamble of a byte array image of a Theta Sketch.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>byteArr</code> - the given byte array</dd>
<dt>Returns:</dt>
<dd>a human readable string of the preamble of a byte array image of a Theta Sketch.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="toString(java.lang.foreign.MemorySegment)">
<h3>toString</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">toString</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/foreign/MemorySegment.html" title="class or interface in java.lang.foreign" class="external-link">MemorySegment</a>&nbsp;seg)</span></div>
<div class="block">Returns a human readable string of the preamble of a MemorySegment image of a Theta Sketch.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>seg</code> - the given MemorySegment object</dd>
<dt>Returns:</dt>
<dd>a human readable string of the preamble of a MemorySegment image of a Theta Sketch.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getLowerBound(int,java.lang.foreign.MemorySegment)">
<h3>getLowerBound</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">getLowerBound</span><wbr><span class="parameters">(int&nbsp;numStdDev,
 <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/foreign/MemorySegment.html" title="class or interface in java.lang.foreign" class="external-link">MemorySegment</a>&nbsp;srcSeg)</span></div>
<div class="block">Gets the approximate lower error bound from a valid MemorySegment image of a Sketch
given the specified number of Standard Deviations.
This will return getEstimate() if isEmpty() is true.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>numStdDev</code> - <a href="../../../../resources/dictionary.html#numStdDev">See Number of Standard Deviations</a></dd>
<dd><code>srcSeg</code> - the source MemorySegment</dd>
<dt>Returns:</dt>
<dd>the lower bound.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getUpperBound(int,java.lang.foreign.MemorySegment)">
<h3>getUpperBound</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">getUpperBound</span><wbr><span class="parameters">(int&nbsp;numStdDev,
 <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/foreign/MemorySegment.html" title="class or interface in java.lang.foreign" class="external-link">MemorySegment</a>&nbsp;srcSeg)</span></div>
<div class="block">Gets the approximate upper error bound from a valid MemorySegment image of a Sketch
given the specified number of Standard Deviations.
This will return getEstimate() if isEmpty() is true.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>numStdDev</code> - <a href="../../../../resources/dictionary.html#numStdDev">See Number of Standard Deviations</a></dd>
<dd><code>srcSeg</code> - the source MemorySegment</dd>
<dt>Returns:</dt>
<dd>the upper bound.</dd>
</dl>
</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2015&#x2013;2024 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</footer>
</main>
</div>
</body>
</html>
