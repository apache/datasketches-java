<!DOCTYPE HTML>
<html lang>
<head>
<!-- Generated by javadoc (17) -->
<title>ItemsSketch (datasketches-java 7.1.0-SNAPSHOT API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: org.apache.datasketches.frequencies, class: ItemsSketch">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/ItemsSketch.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested-class-summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.datasketches.frequencies</a></div>
<h1 title="Class ItemsSketch" class="title">Class ItemsSketch&lt;T&gt;</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">org.apache.datasketches.frequencies.ItemsSketch&lt;T&gt;</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - The type of item to be tracked by this sketch</dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">ItemsSketch&lt;T&gt;</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">This sketch is useful for tracking approximate frequencies of items of type <i>&lt;T&gt;</i>
 with optional associated counts (<i>&lt;T&gt;</i> item, <i>long</i> count) that are members of a
 multiset of such items. The true frequency of an item is defined to be the sum of associated
 counts.

 <p>This implementation provides the following capabilities:</p>
 <ul>
 <li>Estimate the frequency of an item.</li>
 <li>Return upper and lower bounds of any item, such that the true frequency is always
 between the upper and lower bounds.</li>
 <li>Return a global maximum error that holds for all items in the stream.</li>
 <li>Return an array of frequent items that qualify either a NO_FALSE_POSITIVES or a
 NO_FALSE_NEGATIVES error type.</li>
 <li>Merge itself with another sketch object created from this class.</li>
 <li>Serialize/Deserialize to/from a byte array.</li>
 </ul>

 <p><b>Space Usage</b></p>

 <p>The sketch is initialized with a <i>maxMapSize</i> that specifies the maximum physical
 length of the internal hash map of the form (<i>&lt;T&gt;</i> item, <i>long</i> count).
 The <i>maxMapSize</i> must be a power of 2.</p>

 <p>The hash map starts at a very small size (8 entries), and grows as needed up to the
 specified <i>maxMapSize</i>.</p>

 <p>Excluding external space required for the item objects, the internal memory space usage of
 this sketch is 18 * <i>mapSize</i> bytes (assuming 8 bytes for each Java reference), plus a small
 constant number of additional bytes. The internal memory space usage of this sketch will never
 exceed 18 * <i>maxMapSize</i> bytes, plus a small constant number of additional bytes.</p>

 <p><b>Maximum Capacity of the Sketch</b></p>

 <p>The LOAD_FACTOR for the hash map is internally set at 75%,
 which means at any time the map capacity of (item, count) pairs is <i>mapCap</i> = 0.75 *
 <i>mapSize</i>.
 The maximum capacity of (item, count) pairs of the sketch is <i>maxMapCap</i> = 0.75 *
 <i>maxMapSize</i>.</p>

 <p><b>Updating the sketch with (item, count) pairs</b></p>

 <p>If the item is found in the hash map, the mapped count field (the "counter") is
 incremented by the incoming count, otherwise, a new counter "(item, count) pair" is
 created. If the number of tracked counters reaches the maximum capacity of the hash map
 the sketch decrements all of the counters (by an approximately computed median), and
 removes any non-positive counters.</p>

 <p><b>Accuracy</b></p>

 <p>If fewer than 0.75 * <i>maxMapSize</i> different items are inserted into the sketch the
 estimated frequencies returned by the sketch will be exact.</p>

 <p>The logic of the frequent items sketch is such that the stored counts and true counts are
 never too different.
 More specifically, for any <i>item</i>, the sketch can return an estimate of the
 true frequency of <i>item</i>, along with upper and lower bounds on the frequency
 (that hold deterministically).</p>

 <p>For this implementation and for a specific active <i>item</i>, it is guaranteed that
 the true frequency will be between the Upper Bound (UB) and the Lower Bound (LB) computed for
 that <i>item</i>.  Specifically, <i>(UB- LB) &le; W * epsilon</i>, where <i>W</i> denotes the
 sum of all item counts, and <i>epsilon = 3.5/M</i>, where <i>M</i> is the <i>maxMapSize</i>.</p>

 <p>This is a worst case guarantee that applies to arbitrary inputs.<sup>1</sup>
 For inputs typically seen in practice <i>(UB-LB)</i> is usually much smaller.
 </p>

 <p><b>Background</b></p>

 <p>This code implements a variant of what is commonly known as the "Misra-Gries
 algorithm". Variants of it were discovered and rediscovered and redesigned several times
 over the years:</p>
 <ul><li>"Finding repeated elements", Misra, Gries, 1982</li>
 <li>"Frequency estimation of Internet packet streams with limited space" Demaine,
 Lopez-Ortiz, Munro, 2002</li>
 <li>"A simple algorithm for finding frequent elements in streams and bags" Karp, Shenker,
 Papadimitriou, 2003</li>
 <li>"Efficient Computation of Frequent and Top-k Elements in Data Streams" Metwally,
 Agrawal, Abbadi, 2006</li>
 </ul>

 <sup>1</sup> For speed we do employ some randomization that introduces a small probability that
 our proof of the worst-case bound might not apply to a given run. However, we have ensured
 that this probability is extremely small. For example, if the stream causes one table purge
 (rebuild), our proof of the worst case bound applies with probability at least 1 - 1E-14.
 If the stream causes 1E9 purges, our proof applies with probability at least 1 - 1E-5.</div>
<dl class="notes">
<dt>Author:</dt>
<dd>Justin Thaler, Alexander Saydakov</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static class&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="ItemsSketch.Row.html" class="type-name-link" title="class in org.apache.datasketches.frequencies">ItemsSketch.Row</a>&lt;<a href="ItemsSketch.Row.html" title="type parameter in ItemsSketch.Row">T</a>&gt;</code></div>
<div class="col-last even-row-color">
<div class="block">Row class that defines the return values from a getFrequentItems query.</div>
</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(int)" class="member-name-link">ItemsSketch</a><wbr>(int&nbsp;maxMapSize)</code></div>
<div class="col-last even-row-color">
<div class="block">Construct this sketch with the parameter maxMapSize and the default initialMapSize (8).</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static double</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getAprioriError(int,long)" class="member-name-link">getAprioriError</a><wbr>(int&nbsp;maxMapSize,
 long&nbsp;estimatedTotalStreamWeight)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns the estimated <i>a priori</i> error given the maxMapSize for the sketch and the
 estimatedTotalStreamWeight.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getCurrentMapCapacity()" class="member-name-link">getCurrentMapCapacity</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the current number of counters the sketch is configured to support.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static double</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getEpsilon(int)" class="member-name-link">getEpsilon</a><wbr>(int&nbsp;maxMapSize)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns epsilon used to compute <i>a priori</i> error.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getEstimate(T)" class="member-name-link">getEstimate</a><wbr>(<a href="ItemsSketch.html" title="type parameter in ItemsSketch">T</a>&nbsp;item)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Gets the estimate of the frequency of the given item.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="ItemsSketch.Row.html" title="class in org.apache.datasketches.frequencies">ItemsSketch.Row</a>&lt;<a href="ItemsSketch.html" title="type parameter in ItemsSketch">T</a>&gt;[]</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getFrequentItems(long,org.apache.datasketches.frequencies.ErrorType)" class="member-name-link">getFrequentItems</a><wbr>(long&nbsp;threshold,
 <a href="ErrorType.html" title="enum class in org.apache.datasketches.frequencies">ErrorType</a>&nbsp;errorType)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns an array of Rows that include frequent items, estimates, upper and lower bounds
 given a threshold and an ErrorCondition.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="ItemsSketch.Row.html" title="class in org.apache.datasketches.frequencies">ItemsSketch.Row</a>&lt;<a href="ItemsSketch.html" title="type parameter in ItemsSketch">T</a>&gt;[]</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getFrequentItems(org.apache.datasketches.frequencies.ErrorType)" class="member-name-link">getFrequentItems</a><wbr>(<a href="ErrorType.html" title="enum class in org.apache.datasketches.frequencies">ErrorType</a>&nbsp;errorType)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns an array of Rows that include frequent items, estimates, upper and lower bounds
 given an ErrorCondition and the default threshold.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T&gt;&nbsp;<a href="ItemsSketch.html" title="class in org.apache.datasketches.frequencies">ItemsSketch</a>&lt;T&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getInstance(org.apache.datasketches.memory.Memory,org.apache.datasketches.common.ArrayOfItemsSerDe)" class="member-name-link">getInstance</a><wbr>(org.apache.datasketches.memory.Memory&nbsp;srcMem,
 <a href="../common/ArrayOfItemsSerDe.html" title="class in org.apache.datasketches.common">ArrayOfItemsSerDe</a>&lt;T&gt;&nbsp;serDe)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns a sketch instance of this class from the given srcMem,
 which must be a Memory representation of this sketch class.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getLowerBound(T)" class="member-name-link">getLowerBound</a><wbr>(<a href="ItemsSketch.html" title="type parameter in ItemsSketch">T</a>&nbsp;item)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Gets the guaranteed lower bound frequency of the given item, which can never be
 negative.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getMaximumError()" class="member-name-link">getMaximumError</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getMaximumMapCapacity()" class="member-name-link">getMaximumMapCapacity</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the maximum number of counters the sketch is configured to support.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getNumActiveItems()" class="member-name-link">getNumActiveItems</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getStreamLength()" class="member-name-link">getStreamLength</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the sum of the frequencies in the stream seen so far by the sketch</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getUpperBound(T)" class="member-name-link">getUpperBound</a><wbr>(<a href="ItemsSketch.html" title="type parameter in ItemsSketch">T</a>&nbsp;item)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Gets the guaranteed upper bound frequency of the given item.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isEmpty()" class="member-name-link">isEmpty</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns true if this sketch is empty</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="ItemsSketch.html" title="class in org.apache.datasketches.frequencies">ItemsSketch</a>&lt;<a href="ItemsSketch.html" title="type parameter in ItemsSketch">T</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#merge(org.apache.datasketches.frequencies.ItemsSketch)" class="member-name-link">merge</a><wbr>(<a href="ItemsSketch.html" title="class in org.apache.datasketches.frequencies">ItemsSketch</a>&lt;<a href="ItemsSketch.html" title="type parameter in ItemsSketch">T</a>&gt;&nbsp;other)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This function merges the other sketch into this one.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#reset()" class="member-name-link">reset</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Resets this sketch to a virgin state.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>byte[]</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#toByteArray(org.apache.datasketches.common.ArrayOfItemsSerDe)" class="member-name-link">toByteArray</a><wbr>(<a href="../common/ArrayOfItemsSerDe.html" title="class in org.apache.datasketches.common">ArrayOfItemsSerDe</a>&lt;<a href="ItemsSketch.html" title="type parameter in ItemsSketch">T</a>&gt;&nbsp;serDe)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns a byte array representation of this sketch</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#toString()" class="member-name-link">toString</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns a human readable summary of this sketch.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#toString(byte%5B%5D)" class="member-name-link">toString</a><wbr>(byte[]&nbsp;byteArr)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns a human readable string of the preamble of a byte array image of a ItemsSketch.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#toString(org.apache.datasketches.memory.Memory)" class="member-name-link">toString</a><wbr>(org.apache.datasketches.memory.Memory&nbsp;mem)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns a human readable string of the preamble of a Memory image of a ItemsSketch.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#update(T)" class="member-name-link">update</a><wbr>(<a href="ItemsSketch.html" title="type parameter in ItemsSketch">T</a>&nbsp;item)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Update this sketch with an item and a frequency count of one.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#update(T,long)" class="member-name-link">update</a><wbr>(<a href="ItemsSketch.html" title="type parameter in ItemsSketch">T</a>&nbsp;item,
 long&nbsp;count)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Update this sketch with an item and a positive frequency count.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(int)">
<h3>ItemsSketch</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">ItemsSketch</span><wbr><span class="parameters">(int&nbsp;maxMapSize)</span></div>
<div class="block">Construct this sketch with the parameter maxMapSize and the default initialMapSize (8).</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>maxMapSize</code> - Determines the physical size of the internal hash map managed by this
 sketch and must be a power of 2. The maximum capacity of this internal hash map is
 0.75 times * maxMapSize. Both the ultimate accuracy and size of this sketch are
 functions of maxMapSize.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="getInstance(org.apache.datasketches.memory.Memory,org.apache.datasketches.common.ArrayOfItemsSerDe)">
<h3>getInstance</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type"><a href="ItemsSketch.html" title="class in org.apache.datasketches.frequencies">ItemsSketch</a>&lt;T&gt;</span>&nbsp;<span class="element-name">getInstance</span><wbr><span class="parameters">(org.apache.datasketches.memory.Memory&nbsp;srcMem,
 <a href="../common/ArrayOfItemsSerDe.html" title="class in org.apache.datasketches.common">ArrayOfItemsSerDe</a>&lt;T&gt;&nbsp;serDe)</span></div>
<div class="block">Returns a sketch instance of this class from the given srcMem,
 which must be a Memory representation of this sketch class.</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - The type of item that this sketch will track</dd>
<dt>Parameters:</dt>
<dd><code>srcMem</code> - a Memory representation of a sketch of this class.
 <a href="../../../../resources/dictionary.html#mem">See Memory</a></dd>
<dd><code>serDe</code> - an instance of ArrayOfItemsSerDe</dd>
<dt>Returns:</dt>
<dd>a sketch instance of this class.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getAprioriError(int,long)">
<h3>getAprioriError</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">getAprioriError</span><wbr><span class="parameters">(int&nbsp;maxMapSize,
 long&nbsp;estimatedTotalStreamWeight)</span></div>
<div class="block">Returns the estimated <i>a priori</i> error given the maxMapSize for the sketch and the
 estimatedTotalStreamWeight.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>maxMapSize</code> - the planned map size to be used when constructing this sketch.</dd>
<dd><code>estimatedTotalStreamWeight</code> - the estimated total stream weight.</dd>
<dt>Returns:</dt>
<dd>the estimated <i>a priori</i> error.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getCurrentMapCapacity()">
<h3>getCurrentMapCapacity</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getCurrentMapCapacity</span>()</div>
<div class="block">Returns the current number of counters the sketch is configured to support.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the current number of counters the sketch is configured to support.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getEpsilon(int)">
<h3>getEpsilon</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">getEpsilon</span><wbr><span class="parameters">(int&nbsp;maxMapSize)</span></div>
<div class="block">Returns epsilon used to compute <i>a priori</i> error.
 This is just the value <i>3.5 / maxMapSize</i>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>maxMapSize</code> - the planned map size to be used when constructing this sketch.</dd>
<dt>Returns:</dt>
<dd>epsilon used to compute <i>a priori</i> error.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getEstimate(T)">
<h3 id="getEstimate(java.lang.Object)">getEstimate</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getEstimate</span><wbr><span class="parameters">(<a href="ItemsSketch.html" title="type parameter in ItemsSketch">T</a>&nbsp;item)</span></div>
<div class="block">Gets the estimate of the frequency of the given item.
 Note: The true frequency of a item would be the sum of the counts as a result of the
 two update functions.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>item</code> - the given item</dd>
<dt>Returns:</dt>
<dd>the estimate of the frequency of the given item</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getLowerBound(T)">
<h3 id="getLowerBound(java.lang.Object)">getLowerBound</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getLowerBound</span><wbr><span class="parameters">(<a href="ItemsSketch.html" title="type parameter in ItemsSketch">T</a>&nbsp;item)</span></div>
<div class="block">Gets the guaranteed lower bound frequency of the given item, which can never be
 negative.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>item</code> - the given item.</dd>
<dt>Returns:</dt>
<dd>the guaranteed lower bound frequency of the given item. That is, a number which
 is guaranteed to be no larger than the real frequency.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getFrequentItems(long,org.apache.datasketches.frequencies.ErrorType)">
<h3>getFrequentItems</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="ItemsSketch.Row.html" title="class in org.apache.datasketches.frequencies">ItemsSketch.Row</a>&lt;<a href="ItemsSketch.html" title="type parameter in ItemsSketch">T</a>&gt;[]</span>&nbsp;<span class="element-name">getFrequentItems</span><wbr><span class="parameters">(long&nbsp;threshold,
 <a href="ErrorType.html" title="enum class in org.apache.datasketches.frequencies">ErrorType</a>&nbsp;errorType)</span></div>
<div class="block">Returns an array of Rows that include frequent items, estimates, upper and lower bounds
 given a threshold and an ErrorCondition. If the threshold is lower than getMaximumError(),
 then getMaximumError() will be used instead.

 <p>The method first examines all active items in the sketch (items that have a counter).

 <p>If <i>ErrorType = NO_FALSE_NEGATIVES</i>, this will include an item in the result
 list if getUpperBound(item) &gt; threshold.
 There will be no false negatives, i.e., no Type II error.
 There may be items in the set with true frequencies less than the threshold
 (false positives).</p>

 <p>If <i>ErrorType = NO_FALSE_POSITIVES</i>, this will include an item in the result
 list if getLowerBound(item) &gt; threshold.
 There will be no false positives, i.e., no Type I error.
 There may be items omitted from the set with true frequencies greater than the
 threshold (false negatives).</p></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>threshold</code> - to include items in the result list</dd>
<dd><code>errorType</code> - determines whether no false positives or no false negatives are
 desired.</dd>
<dt>Returns:</dt>
<dd>an array of frequent items</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getFrequentItems(org.apache.datasketches.frequencies.ErrorType)">
<h3>getFrequentItems</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="ItemsSketch.Row.html" title="class in org.apache.datasketches.frequencies">ItemsSketch.Row</a>&lt;<a href="ItemsSketch.html" title="type parameter in ItemsSketch">T</a>&gt;[]</span>&nbsp;<span class="element-name">getFrequentItems</span><wbr><span class="parameters">(<a href="ErrorType.html" title="enum class in org.apache.datasketches.frequencies">ErrorType</a>&nbsp;errorType)</span></div>
<div class="block">Returns an array of Rows that include frequent items, estimates, upper and lower bounds
 given an ErrorCondition and the default threshold.
 This is the same as getFrequentItems(getMaximumError(), errorType)</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>errorType</code> - determines whether no false positives or no false negatives are
 desired.</dd>
<dt>Returns:</dt>
<dd>an array of frequent items</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getMaximumError()">
<h3>getMaximumError</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getMaximumError</span>()</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>An upper bound on the maximum error of getEstimate(item) for any item.
 This is equivalent to the maximum distance between the upper bound and the lower bound
 for any item.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getMaximumMapCapacity()">
<h3>getMaximumMapCapacity</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getMaximumMapCapacity</span>()</div>
<div class="block">Returns the maximum number of counters the sketch is configured to support.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the maximum number of counters the sketch is configured to support.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getNumActiveItems()">
<h3>getNumActiveItems</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getNumActiveItems</span>()</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the number of active items in the sketch.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getStreamLength()">
<h3>getStreamLength</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getStreamLength</span>()</div>
<div class="block">Returns the sum of the frequencies in the stream seen so far by the sketch</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the sum of the frequencies in the stream seen so far by the sketch</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getUpperBound(T)">
<h3 id="getUpperBound(java.lang.Object)">getUpperBound</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getUpperBound</span><wbr><span class="parameters">(<a href="ItemsSketch.html" title="type parameter in ItemsSketch">T</a>&nbsp;item)</span></div>
<div class="block">Gets the guaranteed upper bound frequency of the given item.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>item</code> - the given item</dd>
<dt>Returns:</dt>
<dd>the guaranteed upper bound frequency of the given item. That is, a number which
 is guaranteed to be no smaller than the real frequency.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isEmpty()">
<h3>isEmpty</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isEmpty</span>()</div>
<div class="block">Returns true if this sketch is empty</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true if this sketch is empty</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="merge(org.apache.datasketches.frequencies.ItemsSketch)">
<h3>merge</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="ItemsSketch.html" title="class in org.apache.datasketches.frequencies">ItemsSketch</a>&lt;<a href="ItemsSketch.html" title="type parameter in ItemsSketch">T</a>&gt;</span>&nbsp;<span class="element-name">merge</span><wbr><span class="parameters">(<a href="ItemsSketch.html" title="class in org.apache.datasketches.frequencies">ItemsSketch</a>&lt;<a href="ItemsSketch.html" title="type parameter in ItemsSketch">T</a>&gt;&nbsp;other)</span></div>
<div class="block">This function merges the other sketch into this one.
 The other sketch may be of a different size.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>other</code> - sketch of this class</dd>
<dt>Returns:</dt>
<dd>a sketch whose estimates are within the guarantees of the
 largest error tolerance of the two merged sketches.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="reset()">
<h3>reset</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">reset</span>()</div>
<div class="block">Resets this sketch to a virgin state.</div>
</section>
</li>
<li>
<section class="detail" id="toByteArray(org.apache.datasketches.common.ArrayOfItemsSerDe)">
<h3>toByteArray</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">byte[]</span>&nbsp;<span class="element-name">toByteArray</span><wbr><span class="parameters">(<a href="../common/ArrayOfItemsSerDe.html" title="class in org.apache.datasketches.common">ArrayOfItemsSerDe</a>&lt;<a href="ItemsSketch.html" title="type parameter in ItemsSketch">T</a>&gt;&nbsp;serDe)</span></div>
<div class="block">Returns a byte array representation of this sketch</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>serDe</code> - an instance of ArrayOfItemsSerDe</dd>
<dt>Returns:</dt>
<dd>a byte array representation of this sketch</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="toString()">
<h3>toString</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">toString</span>()</div>
<div class="block">Returns a human readable summary of this sketch.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></dd>
<dt>Returns:</dt>
<dd>a human readable summary of this sketch.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="toString(byte[])">
<h3>toString</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">toString</span><wbr><span class="parameters">(byte[]&nbsp;byteArr)</span></div>
<div class="block">Returns a human readable string of the preamble of a byte array image of a ItemsSketch.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>byteArr</code> - the given byte array</dd>
<dt>Returns:</dt>
<dd>a human readable string of the preamble of a byte array image of a ItemsSketch.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="toString(org.apache.datasketches.memory.Memory)">
<h3>toString</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">toString</span><wbr><span class="parameters">(org.apache.datasketches.memory.Memory&nbsp;mem)</span></div>
<div class="block">Returns a human readable string of the preamble of a Memory image of a ItemsSketch.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>mem</code> - the given Memory object</dd>
<dt>Returns:</dt>
<dd>a human readable string of the preamble of a Memory image of a ItemsSketch.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="update(T)">
<h3 id="update(java.lang.Object)">update</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">update</span><wbr><span class="parameters">(<a href="ItemsSketch.html" title="type parameter in ItemsSketch">T</a>&nbsp;item)</span></div>
<div class="block">Update this sketch with an item and a frequency count of one.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>item</code> - for which the frequency should be increased.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="update(T,long)">
<h3 id="update(java.lang.Object,long)">update</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">update</span><wbr><span class="parameters">(<a href="ItemsSketch.html" title="type parameter in ItemsSketch">T</a>&nbsp;item,
 long&nbsp;count)</span></div>
<div class="block">Update this sketch with an item and a positive frequency count.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>item</code> - for which the frequency should be increased. The sketch uses
 hashCode() and equals() methods of the type T.</dd>
<dd><code>count</code> - the amount by which the frequency of the item should be increased.
 A count of zero is a no-op, and a negative count will throw an exception.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2015&#x2013;2024 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
