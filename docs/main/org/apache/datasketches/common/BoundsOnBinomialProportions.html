<!DOCTYPE HTML>
<html lang>
<head>
<!-- Generated by javadoc (17) -->
<title>BoundsOnBinomialProportions (datasketches-java 7.1.0-SNAPSHOT API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: org.apache.datasketches.common, class: BoundsOnBinomialProportions">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/BoundsOnBinomialProportions.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.datasketches.common</a></div>
<h1 title="Class BoundsOnBinomialProportions" class="title">Class BoundsOnBinomialProportions</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">org.apache.datasketches.common.BoundsOnBinomialProportions</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="modifiers">public final class </span><span class="element-name type-name-label">BoundsOnBinomialProportions</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">Confidence intervals for binomial proportions.

 <p>This class computes an approximation to the Clopper-Pearson confidence interval
 for a binomial proportion. Exact Clopper-Pearson intervals are strictly
 conservative, but these approximations are not.</p>

 <p>The main inputs are numbers <i>n</i> and <i>k</i>, which are not the same as other things
 that are called <i>n</i> and <i>k</i> in our sketching library. There is also a third
 parameter, numStdDev, that specifies the desired confidence level.</p>
 <ul>
 <li><i>n</i> is the number of independent randomized trials. It is given and therefore known.</li>
 <li><i>p</i> is the probability of a trial being a success. It is unknown.</li>
 <li><i>k</i> is the number of trials (out of <i>n</i>) that turn out to be successes. It is
 a random variable governed by a binomial distribution. After any given
 batch of <i>n</i> independent trials, the random variable <i>k</i> has a specific
 value which is observed and is therefore known.</li>
 <li><i>pHat</i> = <i>k</i> / <i>n</i> is an unbiased estimate of the unknown success
 probability <i>p</i>.</li>
 </ul>

 <p>Alternatively, consider a coin with unknown heads probability <i>p</i>. Where
 <i>n</i> is the number of independent flips of that coin, and <i>k</i> is the number
 of times that the coin comes up heads during a given batch of <i>n</i> flips.
 This class computes a frequentist confidence interval [lowerBoundOnP, upperBoundOnP] for the
 unknown <i>p</i>.</p>

 <p>Conceptually, the desired confidence level is specified by a tail probability delta.</p>

 <p>Ideally, over a large ensemble of independent batches of trials,
 the fraction of batches in which the true <i>p</i> lies below lowerBoundOnP would be at most
 delta, and the fraction of batches in which the true <i>p</i> lies above upperBoundOnP
 would also be at most delta.

 <p>Setting aside the philosophical difficulties attaching to that statement, it isn't quite
 true because we are approximating the Clopper-Pearson interval.</p>

 <p>Finally, we point out that in this class's interface, the confidence parameter delta is
 not specified directly, but rather through a "number of standard deviations" numStdDev.
 The library effectively converts that to a delta via delta = normalCDF (-1.0 * numStdDev).</p>

 <p>It is perhaps worth emphasizing that the library is NOT merely adding and subtracting
 numStdDev standard deviations to the estimate. It is doing something better, that to some
 extent accounts for the fact that the binomial distribution has a non-gaussian shape.</p>

 <p>In particular, it is using an approximation to the inverse of the incomplete beta function
 that appears as formula 26.5.22 on page 945 of the "Handbook of Mathematical Functions"
 by Abramowitz and Stegun.</p></div>
<dl class="notes">
<dt>Author:</dt>
<dd>Kevin Lang</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static double</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#approximateLowerBoundOnP(long,long,double)" class="member-name-link">approximateLowerBoundOnP</a><wbr>(long&nbsp;n,
 long&nbsp;k,
 double&nbsp;numStdDevs)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Computes lower bound of approximate Clopper-Pearson confidence interval for a binomial
 proportion.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static double</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#approximateUpperBoundOnP(long,long,double)" class="member-name-link">approximateUpperBoundOnP</a><wbr>(long&nbsp;n,
 long&nbsp;k,
 double&nbsp;numStdDevs)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Computes upper bound of approximate Clopper-Pearson confidence interval for a binomial
 proportion.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static double</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#erf(double)" class="member-name-link">erf</a><wbr>(double&nbsp;x)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Computes an approximation to the erf() function.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static double</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#estimateUnknownP(long,long)" class="member-name-link">estimateUnknownP</a><wbr>(long&nbsp;n,
 long&nbsp;k)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Computes an estimate of an unknown binomial proportion.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static double</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#normalCDF(double)" class="member-name-link">normalCDF</a><wbr>(double&nbsp;x)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Computes an approximation to normalCDF(x).</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="approximateLowerBoundOnP(long,long,double)">
<h3>approximateLowerBoundOnP</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">approximateLowerBoundOnP</span><wbr><span class="parameters">(long&nbsp;n,
 long&nbsp;k,
 double&nbsp;numStdDevs)</span></div>
<div class="block">Computes lower bound of approximate Clopper-Pearson confidence interval for a binomial
 proportion.

 <p>Implementation Notes:<br>
 The approximateLowerBoundOnP is defined with respect to the right tail of the binomial
 distribution.</p>
 <ul>
 <li>We want to solve for the <i>p</i> for which sum<sub><i>j,k,n</i></sub>bino(<i>j;n,p</i>)
 = delta.</li>
 <li>We now restate that in terms of the left tail.</li>
 <li>We want to solve for the p for which sum<sub><i>j,0,(k-1)</i></sub>bino(<i>j;n,p</i>)
 = 1 - delta.</li>
 <li>Define <i>x</i> = 1-<i>p</i>.</li>
 <li>We want to solve for the <i>x</i> for which I<sub><i>x(n-k+1,k)</i></sub> = 1 - delta.</li>
 <li>We specify 1-delta via numStdDevs through the right tail of the standard normal
 distribution.</li>
 <li>Smaller values of numStdDevs correspond to bigger values of 1-delta and hence to smaller
 values of delta. In fact, usefully small values of delta correspond to negative values of
 numStdDevs.</li>
 <li>return <i>p</i> = 1-<i>x</i>.</li>
 </ul></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>n</code> - is the number of trials. Must be non-negative.</dd>
<dd><code>k</code> - is the number of successes. Must be non-negative, and cannot exceed n.</dd>
<dd><code>numStdDevs</code> - the number of standard deviations defining the confidence interval</dd>
<dt>Returns:</dt>
<dd>the lower bound of the approximate Clopper-Pearson confidence interval for the
 unknown success probability.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="approximateUpperBoundOnP(long,long,double)">
<h3>approximateUpperBoundOnP</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">approximateUpperBoundOnP</span><wbr><span class="parameters">(long&nbsp;n,
 long&nbsp;k,
 double&nbsp;numStdDevs)</span></div>
<div class="block">Computes upper bound of approximate Clopper-Pearson confidence interval for a binomial
 proportion.

 <p>Implementation Notes:<br>
 The approximateUpperBoundOnP is defined with respect to the left tail of the binomial
 distribution.</p>
 <ul>
 <li>We want to solve for the <i>p</i> for which sum<sub><i>j,0,k</i></sub>bino(<i>j;n,p</i>)
 = delta.</li>
 <li>Define <i>x</i> = 1-<i>p</i>.</li>
 <li>We want to solve for the <i>x</i> for which I<sub><i>x(n-k,k+1)</i></sub> = delta.</li>
 <li>We specify delta via numStdDevs through the right tail of the standard normal
 distribution.</li>
 <li>Bigger values of numStdDevs correspond to smaller values of delta.</li>
 <li>return <i>p</i> = 1-<i>x</i>.</li>
 </ul></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>n</code> - is the number of trials. Must be non-negative.</dd>
<dd><code>k</code> - is the number of successes. Must be non-negative, and cannot exceed <i>n</i>.</dd>
<dd><code>numStdDevs</code> - the number of standard deviations defining the confidence interval</dd>
<dt>Returns:</dt>
<dd>the upper bound of the approximate Clopper-Pearson confidence interval for the
 unknown success probability.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="estimateUnknownP(long,long)">
<h3>estimateUnknownP</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">estimateUnknownP</span><wbr><span class="parameters">(long&nbsp;n,
 long&nbsp;k)</span></div>
<div class="block">Computes an estimate of an unknown binomial proportion.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>n</code> - is the number of trials. Must be non-negative.</dd>
<dd><code>k</code> - is the number of successes. Must be non-negative, and cannot exceed n.</dd>
<dt>Returns:</dt>
<dd>the estimate of the unknown binomial proportion.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="erf(double)">
<h3>erf</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">erf</span><wbr><span class="parameters">(double&nbsp;x)</span></div>
<div class="block">Computes an approximation to the erf() function.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>x</code> - is the input to the erf function</dd>
<dt>Returns:</dt>
<dd>returns erf(x), accurate to roughly 7 decimal digits.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="normalCDF(double)">
<h3>normalCDF</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">normalCDF</span><wbr><span class="parameters">(double&nbsp;x)</span></div>
<div class="block">Computes an approximation to normalCDF(x).</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>x</code> - is the input to the normalCDF function</dd>
<dt>Returns:</dt>
<dd>returns the approximation to normalCDF(x).</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2015&#x2013;2024 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
