<!DOCTYPE HTML>
<html lang>
<head>
<!-- Generated by javadoc (25) -->
<title>KllSketch (datasketches-java 9.0.0-SNAPSHOT API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: org.apache.datasketches.kll, class: KllSketch">
<meta name="generator" content="javadoc/ClassWriter">
<link rel="stylesheet" type="text/css" href="../../../../resource-files/jquery-ui.min.css">
<link rel="stylesheet" type="text/css" href="../../../../resource-files/stylesheet.css">
<script type="text/javascript" src="../../../../script-files/script.js"></script>
<script type="text/javascript" src="../../../../script-files/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../script-files/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">const pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="nav-content">
<div class="nav-menu-button"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button></div>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/KllSketch.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../search.html">Search</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
</div>
<div class="sub-nav">
<div class="nav-content">
<ol class="sub-nav-list">
<li><a href="package-summary.html">org.apache.datasketches.kll</a></li>
<li><a href="KllSketch.html" class="current-selection">KllSketch</a></li>
</ol>
<div class="nav-list-search"><input type="text" id="search-input" disabled placeholder="Search documentation (type /)" aria-label="Search in documentation" autocomplete="off" spellcheck="false"><input type="reset" id="reset-search" disabled value="Reset"></div>
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="main-grid">
<nav role="navigation" class="toc" aria-label="Table of contents">
<div class="toc-header">Contents&nbsp;<input type="text" class="filter-input" disabled placeholder="Filter contents (type .)" aria-label="Filter table of contents" autocomplete="off" spellcheck="false"><input type="reset" class="reset-filter" disabled tabindex="-1" value="Reset"></div>
<ol class="toc-list" tabindex="-1">
<li><a href="#" tabindex="0">Description</a></li>
<li><a href="#nested-class-summary" tabindex="0">Nested Class Summary</a></li>
<li><a href="#field-summary" tabindex="0">Field Summary</a></li>
<li><a href="#method-summary" tabindex="0">Method Summary</a></li>
<li><a href="#field-detail" tabindex="0">Field Details</a>
<ol class="toc-list">
<li><a href="#DEFAULT_K" tabindex="0">DEFAULT_K</a></li>
<li><a href="#MAX_K" tabindex="0">MAX_K</a></li>
</ol>
</li>
<li><a href="#method-detail" tabindex="0">Method Details</a>
<ol class="toc-list">
<li><a href="#getKFromEpsilon(double,boolean)" tabindex="0">getKFromEpsilon(double, boolean)</a></li>
<li><a href="#getMaxSerializedSizeBytes(int,long,org.apache.datasketches.kll.KllSketch.SketchType,boolean)" tabindex="0">getMaxSerializedSizeBytes(int, long, KllSketch.SketchType, boolean)</a></li>
<li><a href="#getNormalizedRankError(int,boolean)" tabindex="0">getNormalizedRankError(int, boolean)</a></li>
<li><a href="#getNormalizedRankError(boolean)" tabindex="0">getNormalizedRankError(boolean)</a></li>
<li><a href="#getNumRetained()" tabindex="0">getNumRetained()</a></li>
<li><a href="#getSerializedSizeBytes()" tabindex="0">getSerializedSizeBytes()</a></li>
<li><a href="#hasMemorySegment()" tabindex="0">hasMemorySegment()</a></li>
<li><a href="#isCompactMemorySegmentFormat()" tabindex="0">isCompactMemorySegmentFormat()</a></li>
<li><a href="#isOffHeap()" tabindex="0">isOffHeap()</a></li>
<li><a href="#isEmpty()" tabindex="0">isEmpty()</a></li>
<li><a href="#isEstimationMode()" tabindex="0">isEstimationMode()</a></li>
<li><a href="#isMemorySegmentUpdatableFormat()" tabindex="0">isMemorySegmentUpdatableFormat()</a></li>
<li><a href="#isReadOnly()" tabindex="0">isReadOnly()</a></li>
<li><a href="#isSameResource(java.lang.foreign.MemorySegment)" tabindex="0">isSameResource(MemorySegment)</a></li>
<li><a href="#merge(org.apache.datasketches.kll.KllSketch)" tabindex="0">merge(KllSketch)</a></li>
<li><a href="#toString()" tabindex="0">toString()</a></li>
<li><a href="#toString(boolean,boolean)" tabindex="0">toString(boolean, boolean)</a></li>
</ol>
</li>
</ol>
<button class="hide-sidebar"><span>Hide sidebar&nbsp;</span><img src="../../../../resource-files/left.svg" alt="Hide sidebar"></button><button class="show-sidebar"><img src="../../../../resource-files/right.svg" alt="Show sidebar"><span>&nbsp;Show sidebar</span></button></nav>
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<h1 title="Class KllSketch" class="title">Class KllSketch</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">org.apache.datasketches.kll.KllSketch</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../common/MemorySegmentStatus.html" title="interface in org.apache.datasketches.common">MemorySegmentStatus</a>, <a href="../quantilescommon/QuantilesAPI.html" title="interface in org.apache.datasketches.quantilescommon">QuantilesAPI</a></code></dd>
</dl>
<dl class="notes">
<dt>Direct Known Subclasses:</dt>
<dd><code><a href="KllDoublesSketch.html" title="class in org.apache.datasketches.kll">KllDoublesSketch</a>, <a href="KllFloatsSketch.html" title="class in org.apache.datasketches.kll">KllFloatsSketch</a>, <a href="KllItemsSketch.html" title="class in org.apache.datasketches.kll">KllItemsSketch</a>, <a href="KllLongsSketch.html" title="class in org.apache.datasketches.kll">KllLongsSketch</a></code></dd>
</dl>
<hr>
<div class="horizontal-scroll">
<div class="type-signature"><span class="modifiers">public abstract class </span><span class="element-name type-name-label">KllSketch</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>
implements <a href="../quantilescommon/QuantilesAPI.html" title="interface in org.apache.datasketches.quantilescommon">QuantilesAPI</a>, <a href="../common/MemorySegmentStatus.html" title="interface in org.apache.datasketches.common">MemorySegmentStatus</a></span></div>
<div class="block">This class is the root of the KLL sketch class hierarchy. It includes the public API that is independent
of either sketch type (e.g., float, double or generic item) and independent of whether the sketch is targeted
for use on the Java heap or off-heap.

<p>KLL is an implementation of a very compact quantiles sketch with lazy compaction scheme
and nearly optimal accuracy per retained quantile.</p>

<p>Reference <a href="https://arxiv.org/abs/1603.05346v2">Optimal Quantile Approximation in Streams</a>.</p>

<p>The default <i>k</i> of 200 yields a "single-sided" epsilon of about 1.33% and a
"double-sided" (PMF) epsilon of about 1.65%, with a confidence of 99%.</p></div>
<dl class="notes">
<dt>Author:</dt>
<dd>Lee Rhodes, Kevin Lang, Alexander Saydakov</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="https://datasketches.apache.org/docs/KLL/KLLSketch.html">KLL Sketch</a></li>
<li><a href="../quantilescommon/QuantilesAPI.html" title="interface in org.apache.datasketches.quantilescommon"><code>QuantilesAPI</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static enum&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="KllSketch.SketchStructure.html" class="type-name-link" title="enum class in org.apache.datasketches.kll">KllSketch.SketchStructure</a></code></div>
<div class="col-last even-row-color">
<div class="block">Used primarily to define the structure of the serialized sketch.</div>
</div>
<div class="col-first odd-row-color"><code>static enum&nbsp;</code></div>
<div class="col-second odd-row-color"><code><a href="KllSketch.SketchType.html" class="type-name-link" title="enum class in org.apache.datasketches.kll">KllSketch.SketchType</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Used to define the variable type of the current instance of this class.</div>
</div>
</div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static final int</code></div>
<div class="col-second even-row-color"><code><a href="#DEFAULT_K" class="member-name-link">DEFAULT_K</a></code></div>
<div class="col-last even-row-color">
<div class="block">The default K</div>
</div>
<div class="col-first odd-row-color"><code>static final int</code></div>
<div class="col-second odd-row-color"><code><a href="#MAX_K" class="member-name-link">MAX_K</a></code></div>
<div class="col-last odd-row-color">
<div class="block">The maximum K</div>
</div>
</div>
<div class="inherited-list">
<h3 id="fields-inherited-from-class-org.apache.datasketches.quantilescommon.QuantilesAPI">Fields inherited from interface&nbsp;<a href="../quantilescommon/QuantilesAPI.html#field-summary" title="interface in org.apache.datasketches.quantilescommon">QuantilesAPI</a></h3>
<code><a href="../quantilescommon/QuantilesAPI.html#EMPTY_MSG">EMPTY_MSG</a>, <a href="../quantilescommon/QuantilesAPI.html#MEM_REQ_SVR_NULL_MSG">MEM_REQ_SVR_NULL_MSG</a>, <a href="../quantilescommon/QuantilesAPI.html#NOT_SINGLE_ITEM_MSG">NOT_SINGLE_ITEM_MSG</a>, <a href="../quantilescommon/QuantilesAPI.html#SELF_MERGE_MSG">SELF_MERGE_MSG</a>, <a href="../quantilescommon/QuantilesAPI.html#TGT_IS_READ_ONLY_MSG">TGT_IS_READ_ONLY_MSG</a>, <a href="../quantilescommon/QuantilesAPI.html#UNSUPPORTED_MSG">UNSUPPORTED_MSG</a></code></div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getKFromEpsilon(double,boolean)" class="member-name-link">getKFromEpsilon</a><wbr>(double&nbsp;epsilon,
 boolean&nbsp;pmf)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Gets the approximate <em>k</em> to use given epsilon, the normalized rank error.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getMaxSerializedSizeBytes(int,long,org.apache.datasketches.kll.KllSketch.SketchType,boolean)" class="member-name-link">getMaxSerializedSizeBytes</a><wbr>(int&nbsp;k,
 long&nbsp;n,
 <a href="KllSketch.SketchType.html" title="enum class in org.apache.datasketches.kll">KllSketch.SketchType</a>&nbsp;sketchType,
 boolean&nbsp;updatableFormat)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns upper bound on the serialized size of a KllSketch given the following parameters.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>final double</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getNormalizedRankError(boolean)" class="member-name-link">getNormalizedRankError</a><wbr>(boolean&nbsp;pmf)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Gets the approximate rank error of this sketch normalized as a fraction between zero and one.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static double</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getNormalizedRankError(int,boolean)" class="member-name-link">getNormalizedRankError</a><wbr>(int&nbsp;k,
 boolean&nbsp;pmf)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Gets the normalized rank error given k and pmf.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>final int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getNumRetained()" class="member-name-link">getNumRetained</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Gets the number of quantiles retained by the sketch.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getSerializedSizeBytes()" class="member-name-link">getSerializedSizeBytes</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the current number of bytes this Sketch would require if serialized in compact form.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>abstract boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#hasMemorySegment()" class="member-name-link">hasMemorySegment</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns true if this object's internal data is backed by a MemorySegment,
which may be on-heap or off-heap.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isCompactMemorySegmentFormat()" class="member-name-link">isCompactMemorySegmentFormat</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns true if this sketch is in a Compact MemorySegment Format.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>final boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isEmpty()" class="member-name-link">isEmpty</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns true if this sketch is empty.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>final boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isEstimationMode()" class="member-name-link">isEstimationMode</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns true if this sketch is in estimation mode.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>final boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isMemorySegmentUpdatableFormat()" class="member-name-link">isMemorySegmentUpdatableFormat</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns true if the backing MemorySegment is in updatable format.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>abstract boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#isOffHeap()" class="member-name-link">isOffHeap</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns true if this object's internal data is backed by an off-heap (direct or native)) MemorySegment.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>final boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isReadOnly()" class="member-name-link">isReadOnly</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns true if this sketch is read only.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>abstract boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#isSameResource(java.lang.foreign.MemorySegment)" class="member-name-link">isSameResource</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/foreign/MemorySegment.html" title="class or interface in java.lang.foreign" class="external-link">MemorySegment</a>&nbsp;that)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns true if an internally referenced MemorySegment has the same backing resource as <i>that</i>,
or equivalently, if their two memory regions overlap.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>abstract void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#merge(org.apache.datasketches.kll.KllSketch)" class="member-name-link">merge</a><wbr>(<a href="KllSketch.html" title="class in org.apache.datasketches.kll">KllSketch</a>&nbsp;other)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Merges another sketch into this one.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>final <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#toString()" class="member-name-link">toString</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns a summary of the key parameters of the sketch.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>abstract <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#toString(boolean,boolean)" class="member-name-link">toString</a><wbr>(boolean&nbsp;withLevels,
 boolean&nbsp;withLevelsAndItems)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns human readable summary information about this sketch.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html#method-summary" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-org.apache.datasketches.quantilescommon.QuantilesAPI">Methods inherited from interface&nbsp;<a href="../quantilescommon/QuantilesAPI.html#method-summary" title="interface in org.apache.datasketches.quantilescommon">QuantilesAPI</a></h3>
<code><a href="../quantilescommon/QuantilesAPI.html#getK()" title="getK()">getK</a>, <a href="../quantilescommon/QuantilesAPI.html#getN()" title="getN()">getN</a>, <a href="../quantilescommon/QuantilesAPI.html#getRankLowerBound(double)" title="getRankLowerBound(double)">getRankLowerBound</a>, <a href="../quantilescommon/QuantilesAPI.html#getRankUpperBound(double)" title="getRankUpperBound(double)">getRankUpperBound</a>, <a href="../quantilescommon/QuantilesAPI.html#reset()" title="reset()">reset</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="DEFAULT_K">
<h3>DEFAULT_K</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">DEFAULT_K</span></div>
<div class="block">The default K</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="../../../../constant-values.html#org.apache.datasketches.kll.KllSketch.DEFAULT_K">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="MAX_K">
<h3>MAX_K</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">MAX_K</span></div>
<div class="block">The maximum K</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="../../../../constant-values.html#org.apache.datasketches.kll.KllSketch.MAX_K">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="getKFromEpsilon(double,boolean)">
<h3>getKFromEpsilon</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getKFromEpsilon</span><wbr><span class="parameters">(double&nbsp;epsilon,
 boolean&nbsp;pmf)</span></div>
<div class="block">Gets the approximate <em>k</em> to use given epsilon, the normalized rank error.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>epsilon</code> - the normalized rank error between zero and one.</dd>
<dd><code>pmf</code> - if true, this function returns the <em>k</em> assuming the input epsilon
is the desired "double-sided" epsilon for the getPMF() function. Otherwise, this function
returns <em>k</em> assuming the input epsilon is the desired "single-sided"
epsilon for all the other queries.</dd>
<dt>Returns:</dt>
<dd><i>k</i> given epsilon.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getMaxSerializedSizeBytes(int,long,org.apache.datasketches.kll.KllSketch.SketchType,boolean)">
<h3>getMaxSerializedSizeBytes</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getMaxSerializedSizeBytes</span><wbr><span class="parameters">(int&nbsp;k,
 long&nbsp;n,
 <a href="KllSketch.SketchType.html" title="enum class in org.apache.datasketches.kll">KllSketch.SketchType</a>&nbsp;sketchType,
 boolean&nbsp;updatableFormat)</span></div>
<div class="block">Returns upper bound on the serialized size of a KllSketch given the following parameters.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>k</code> - parameter that controls size of the sketch and accuracy of estimates</dd>
<dd><code>n</code> - stream length</dd>
<dd><code>sketchType</code> - Only DOUBLES_SKETCH, LONGS_SKETCH and FLOATS_SKETCH are supported for this operation.</dd>
<dd><code>updatableFormat</code> - true if updatable MemorySegment format, otherwise the standard compact format.</dd>
<dt>Returns:</dt>
<dd>upper bound on the serialized size of a KllSketch.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getNormalizedRankError(int,boolean)">
<h3>getNormalizedRankError</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">getNormalizedRankError</span><wbr><span class="parameters">(int&nbsp;k,
 boolean&nbsp;pmf)</span></div>
<div class="block">Gets the normalized rank error given k and pmf.
Static method version of the <i>getNormalizedRankError(boolean)</i>.
The epsilon returned is a best fit to 99 percent confidence empirically measured max error
in thousands of trials.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>k</code> - the configuration parameter</dd>
<dd><code>pmf</code> - if true, returns the "double-sided" normalized rank error for the getPMF() function.
Otherwise, it is the "single-sided" normalized rank error for all the other queries.</dd>
<dt>Returns:</dt>
<dd>if pmf is true, the normalized rank error for the getPMF() function.
Otherwise, it is the "single-sided" normalized rank error for all the other queries.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getNormalizedRankError(boolean)">
<h3>getNormalizedRankError</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">getNormalizedRankError</span><wbr><span class="parameters">(boolean&nbsp;pmf)</span></div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="../quantilescommon/QuantilesAPI.html#getNormalizedRankError(boolean)">QuantilesAPI</a></code></span></div>
<div class="block">Gets the approximate rank error of this sketch normalized as a fraction between zero and one.
The epsilon returned is a best fit to 99 percent confidence empirically measured max error
in thousands of trials.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../quantilescommon/QuantilesAPI.html#getNormalizedRankError(boolean)">getNormalizedRankError</a></code>&nbsp;in interface&nbsp;<code><a href="../quantilescommon/QuantilesAPI.html" title="interface in org.apache.datasketches.quantilescommon">QuantilesAPI</a></code></dd>
<dt>Parameters:</dt>
<dd><code>pmf</code> - if true, returns the "double-sided" normalized rank error for the getPMF() function.
Otherwise, it is the "single-sided" normalized rank error for all the other queries.</dd>
<dt>Returns:</dt>
<dd>if pmf is true, returns the "double-sided" normalized rank error for the getPMF() function.
Otherwise, it is the "single-sided" normalized rank error for all the other queries.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getNumRetained()">
<h3>getNumRetained</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getNumRetained</span>()</div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="../quantilescommon/QuantilesAPI.html#getNumRetained()">QuantilesAPI</a></code></span></div>
<div class="block">Gets the number of quantiles retained by the sketch.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../quantilescommon/QuantilesAPI.html#getNumRetained()">getNumRetained</a></code>&nbsp;in interface&nbsp;<code><a href="../quantilescommon/QuantilesAPI.html" title="interface in org.apache.datasketches.quantilescommon">QuantilesAPI</a></code></dd>
<dt>Returns:</dt>
<dd>the number of quantiles retained by the sketch</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getSerializedSizeBytes()">
<h3>getSerializedSizeBytes</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getSerializedSizeBytes</span>()</div>
<div class="block">Returns the current number of bytes this Sketch would require if serialized in compact form.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the number of bytes this sketch would require if serialized.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="hasMemorySegment()">
<h3>hasMemorySegment</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public abstract</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">hasMemorySegment</span>()</div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="../common/MemorySegmentStatus.html#hasMemorySegment()">MemorySegmentStatus</a></code></span></div>
<div class="block">Returns true if this object's internal data is backed by a MemorySegment,
which may be on-heap or off-heap.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../common/MemorySegmentStatus.html#hasMemorySegment()">hasMemorySegment</a></code>&nbsp;in interface&nbsp;<code><a href="../common/MemorySegmentStatus.html" title="interface in org.apache.datasketches.common">MemorySegmentStatus</a></code></dd>
<dt>Returns:</dt>
<dd>true if this object's internal data is backed by a MemorySegment.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="isCompactMemorySegmentFormat()">
<h3>isCompactMemorySegmentFormat</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isCompactMemorySegmentFormat</span>()</div>
<div class="block">Returns true if this sketch is in a Compact MemorySegment Format.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true if this sketch is in a Compact MemorySegment Format.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="isOffHeap()">
<h3>isOffHeap</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public abstract</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isOffHeap</span>()</div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="../common/MemorySegmentStatus.html#isOffHeap()">MemorySegmentStatus</a></code></span></div>
<div class="block">Returns true if this object's internal data is backed by an off-heap (direct or native)) MemorySegment.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../common/MemorySegmentStatus.html#isOffHeap()">isOffHeap</a></code>&nbsp;in interface&nbsp;<code><a href="../common/MemorySegmentStatus.html" title="interface in org.apache.datasketches.common">MemorySegmentStatus</a></code></dd>
<dt>Returns:</dt>
<dd>true if this object's internal data is backed by an off-heap (direct or native)) MemorySegment.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="isEmpty()">
<h3>isEmpty</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isEmpty</span>()</div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="../quantilescommon/QuantilesAPI.html#isEmpty()">QuantilesAPI</a></code></span></div>
<div class="block">Returns true if this sketch is empty.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../quantilescommon/QuantilesAPI.html#isEmpty()">isEmpty</a></code>&nbsp;in interface&nbsp;<code><a href="../quantilescommon/QuantilesAPI.html" title="interface in org.apache.datasketches.quantilescommon">QuantilesAPI</a></code></dd>
<dt>Returns:</dt>
<dd>true if this sketch is empty.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="isEstimationMode()">
<h3>isEstimationMode</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isEstimationMode</span>()</div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="../quantilescommon/QuantilesAPI.html#isEstimationMode()">QuantilesAPI</a></code></span></div>
<div class="block">Returns true if this sketch is in estimation mode.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../quantilescommon/QuantilesAPI.html#isEstimationMode()">isEstimationMode</a></code>&nbsp;in interface&nbsp;<code><a href="../quantilescommon/QuantilesAPI.html" title="interface in org.apache.datasketches.quantilescommon">QuantilesAPI</a></code></dd>
<dt>Returns:</dt>
<dd>true if this sketch is in estimation mode.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="isMemorySegmentUpdatableFormat()">
<h3>isMemorySegmentUpdatableFormat</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isMemorySegmentUpdatableFormat</span>()</div>
<div class="block">Returns true if the backing MemorySegment is in updatable format.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true if the backing MemorySegment is in updatable format.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="isReadOnly()">
<h3>isReadOnly</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isReadOnly</span>()</div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="../quantilescommon/QuantilesAPI.html#isReadOnly()">QuantilesAPI</a></code></span></div>
<div class="block">Returns true if this sketch is read only.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../quantilescommon/QuantilesAPI.html#isReadOnly()">isReadOnly</a></code>&nbsp;in interface&nbsp;<code><a href="../quantilescommon/QuantilesAPI.html" title="interface in org.apache.datasketches.quantilescommon">QuantilesAPI</a></code></dd>
<dt>Returns:</dt>
<dd>true if this sketch is read only.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="isSameResource(java.lang.foreign.MemorySegment)">
<h3>isSameResource</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public abstract</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isSameResource</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/foreign/MemorySegment.html" title="class or interface in java.lang.foreign" class="external-link">MemorySegment</a>&nbsp;that)</span></div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="../common/MemorySegmentStatus.html#isSameResource(java.lang.foreign.MemorySegment)">MemorySegmentStatus</a></code></span></div>
<div class="block">Returns true if an internally referenced MemorySegment has the same backing resource as <i>that</i>,
or equivalently, if their two memory regions overlap.  This applies to both on-heap and off-heap MemorySegments.

<p><b>Note:</b> If both segments are on-heap and not read-only, it can be determined if they were derived from
the same backing memory (array).  However, this is not always possible off-heap. Because of this asymmetry, this definition
of "isSameResource" is confined to the existence of an overlap.</p></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../common/MemorySegmentStatus.html#isSameResource(java.lang.foreign.MemorySegment)">isSameResource</a></code>&nbsp;in interface&nbsp;<code><a href="../common/MemorySegmentStatus.html" title="interface in org.apache.datasketches.common">MemorySegmentStatus</a></code></dd>
<dt>Parameters:</dt>
<dd><code>that</code> - The given MemorySegment.</dd>
<dt>Returns:</dt>
<dd>true if an internally referenced MemorySegment has the same backing resource as <i>that</i>.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="merge(org.apache.datasketches.kll.KllSketch)">
<h3>merge</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public abstract</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">merge</span><wbr><span class="parameters">(<a href="KllSketch.html" title="class in org.apache.datasketches.kll">KllSketch</a>&nbsp;other)</span></div>
<div class="block">Merges another sketch into this one.
Attempting to merge a sketch of the wrong type will throw an exception.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>other</code> - sketch to merge into this one</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="toString()">
<h3>toString</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">toString</span>()</div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="../quantilescommon/QuantilesAPI.html#toString()">QuantilesAPI</a></code></span></div>
<div class="block">Returns a summary of the key parameters of the sketch.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../quantilescommon/QuantilesAPI.html#toString()">toString</a></code>&nbsp;in interface&nbsp;<code><a href="../quantilescommon/QuantilesAPI.html" title="interface in org.apache.datasketches.quantilescommon">QuantilesAPI</a></code></dd>
<dt>Overrides:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></dd>
<dt>Returns:</dt>
<dd>a summary of the key parameters of the sketch.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="toString(boolean,boolean)">
<h3>toString</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public abstract</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">toString</span><wbr><span class="parameters">(boolean&nbsp;withLevels,
 boolean&nbsp;withLevelsAndItems)</span></div>
<div class="block">Returns human readable summary information about this sketch.
Used for debugging.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>withLevels</code> - if true includes sketch levels array summary information</dd>
<dd><code>withLevelsAndItems</code> - if true include detail of levels array and items array together</dd>
<dt>Returns:</dt>
<dd>human readable summary information about this sketch.</dd>
</dl>
</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2015&#x2013;2024 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</footer>
</main>
</div>
</body>
</html>
