<!DOCTYPE HTML>
<html lang>
<head>
<!-- Generated by javadoc (25) -->
<title>HashOperations (datasketches-java 9.0.0-SNAPSHOT API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: org.apache.datasketches.thetacommon, class: HashOperations">
<meta name="generator" content="javadoc/ClassWriter">
<link rel="stylesheet" type="text/css" href="../../../../resource-files/jquery-ui.min.css">
<link rel="stylesheet" type="text/css" href="../../../../resource-files/stylesheet.css">
<script type="text/javascript" src="../../../../script-files/script.js"></script>
<script type="text/javascript" src="../../../../script-files/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../script-files/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">const pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="nav-content">
<div class="nav-menu-button"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button></div>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/HashOperations.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../search.html">Search</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
</div>
<div class="sub-nav">
<div class="nav-content">
<ol class="sub-nav-list">
<li><a href="package-summary.html">org.apache.datasketches.thetacommon</a></li>
<li><a href="HashOperations.html" class="current-selection">HashOperations</a></li>
</ol>
<div class="nav-list-search"><input type="text" id="search-input" disabled placeholder="Search documentation (type /)" aria-label="Search in documentation" autocomplete="off" spellcheck="false"><input type="reset" id="reset-search" disabled value="Reset"></div>
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="main-grid">
<nav role="navigation" class="toc" aria-label="Table of contents">
<div class="toc-header">Contents&nbsp;<input type="text" class="filter-input" disabled placeholder="Filter contents (type .)" aria-label="Filter table of contents" autocomplete="off" spellcheck="false"><input type="reset" class="reset-filter" disabled tabindex="-1" value="Reset"></div>
<ol class="toc-list" tabindex="-1">
<li><a href="#" tabindex="0">Description</a></li>
<li><a href="#field-summary" tabindex="0">Field Summary</a></li>
<li><a href="#method-summary" tabindex="0">Method Summary</a></li>
<li><a href="#field-detail" tabindex="0">Field Details</a>
<ol class="toc-list">
<li><a href="#STRIDE_MASK" tabindex="0">STRIDE_MASK</a></li>
</ol>
</li>
<li><a href="#method-detail" tabindex="0">Method Details</a>
<ol class="toc-list">
<li><a href="#hashSearch(long%5B%5D,int,long)" tabindex="0">hashSearch(long[], int, long)</a></li>
<li><a href="#hashInsertOnly(long%5B%5D,int,long)" tabindex="0">hashInsertOnly(long[], int, long)</a></li>
<li><a href="#hashSearchOrInsert(long%5B%5D,int,long)" tabindex="0">hashSearchOrInsert(long[], int, long)</a></li>
<li><a href="#hashArrayInsert(long%5B%5D,long%5B%5D,int,long)" tabindex="0">hashArrayInsert(long[], long[], int, long)</a></li>
<li><a href="#hashSearchMemorySegment(java.lang.foreign.MemorySegment,int,long,int)" tabindex="0">hashSearchMemorySegment(MemorySegment, int, long, int)</a></li>
<li><a href="#hashInsertOnlyMemorySegment(java.lang.foreign.MemorySegment,int,long,int)" tabindex="0">hashInsertOnlyMemorySegment(MemorySegment, int, long, int)</a></li>
<li><a href="#hashSearchOrInsertMemorySegment(java.lang.foreign.MemorySegment,int,long,int)" tabindex="0">hashSearchOrInsertMemorySegment(MemorySegment, int, long, int)</a></li>
<li><a href="#checkThetaCorruption(long)" tabindex="0">checkThetaCorruption(long)</a></li>
<li><a href="#checkHashCorruption(long)" tabindex="0">checkHashCorruption(long)</a></li>
<li><a href="#continueCondition(long,long)" tabindex="0">continueCondition(long, long)</a></li>
<li><a href="#convertToHashTable(long%5B%5D,int,long,double)" tabindex="0">convertToHashTable(long[], int, long, double)</a></li>
<li><a href="#minLgHashTableSize(int,double)" tabindex="0">minLgHashTableSize(int, double)</a></li>
<li><a href="#countPart(long%5B%5D,int,long)" tabindex="0">countPart(long[], int, long)</a></li>
<li><a href="#count(long%5B%5D,long)" tabindex="0">count(long[], long)</a></li>
</ol>
</li>
</ol>
<button class="hide-sidebar"><span>Hide sidebar&nbsp;</span><img src="../../../../resource-files/left.svg" alt="Hide sidebar"></button><button class="show-sidebar"><img src="../../../../resource-files/right.svg" alt="Show sidebar"><span>&nbsp;Show sidebar</span></button></nav>
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<h1 title="Class HashOperations" class="title">Class HashOperations</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">org.apache.datasketches.thetacommon.HashOperations</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="horizontal-scroll">
<div class="type-signature"><span class="modifiers">public final class </span><span class="element-name type-name-label">HashOperations</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">Helper class for the common hash table methods.</div>
<dl class="notes">
<dt>Author:</dt>
<dd>Lee Rhodes, Kevin Lang</dd>
</dl>
</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static final int</code></div>
<div class="col-second even-row-color"><code><a href="#STRIDE_MASK" class="member-name-link">STRIDE_MASK</a></code></div>
<div class="col-last even-row-color">
<div class="block">The stride mask for the Open Address, Double Hashing (OADH) hash table algorithm.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#checkHashCorruption(long)" class="member-name-link">checkHashCorruption</a><wbr>(long&nbsp;hash)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Checks that the given hash value is not negative.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#checkThetaCorruption(long)" class="member-name-link">checkThetaCorruption</a><wbr>(long&nbsp;thetaLong)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Checks that the given theta is not negative nor zero.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#continueCondition(long,long)" class="member-name-link">continueCondition</a><wbr>(long&nbsp;thetaLong,
 long&nbsp;hash)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Return true (continue) if hash is greater than or equal to thetaLong, or if hash == 0,
or if hash == Long.MAX_VALUE.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static long[]</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#convertToHashTable(long%5B%5D,int,long,double)" class="member-name-link">convertToHashTable</a><wbr>(long[]&nbsp;hashArr,
 int&nbsp;count,
 long&nbsp;thetaLong,
 double&nbsp;rebuildThreshold)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Converts the given array to a hash table.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#count(long%5B%5D,long)" class="member-name-link">count</a><wbr>(long[]&nbsp;srcArr,
 long&nbsp;thetaLong)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Counts the cardinality of the given source array.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#countPart(long%5B%5D,int,long)" class="member-name-link">countPart</a><wbr>(long[]&nbsp;srcArr,
 int&nbsp;lgArrLongs,
 long&nbsp;thetaLong)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Counts the cardinality of the first Log2 values of the given source array.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#hashArrayInsert(long%5B%5D,long%5B%5D,int,long)" class="member-name-link">hashArrayInsert</a><wbr>(long[]&nbsp;srcArr,
 long[]&nbsp;hashTable,
 int&nbsp;lgArrLongs,
 long&nbsp;thetaLong)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Inserts the given long array into the given OADH hashTable of the target size,
ignores duplicates and counts the values inserted.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#hashInsertOnly(long%5B%5D,int,long)" class="member-name-link">hashInsertOnly</a><wbr>(long[]&nbsp;hashTable,
 int&nbsp;lgArrLongs,
 long&nbsp;hash)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">This is a classical Knuth-style Open Addressing, Double Hash (OADH) insert scheme for on-heap.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#hashInsertOnlyMemorySegment(java.lang.foreign.MemorySegment,int,long,int)" class="member-name-link">hashInsertOnlyMemorySegment</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/foreign/MemorySegment.html" title="class or interface in java.lang.foreign" class="external-link">MemorySegment</a>&nbsp;wseg,
 int&nbsp;lgArrLongs,
 long&nbsp;hash,
 int&nbsp;segOffsetBytes)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">This is a classical Knuth-style Open Addressing, Double Hash (OADH) insert scheme for MemorySegment.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#hashSearch(long%5B%5D,int,long)" class="member-name-link">hashSearch</a><wbr>(long[]&nbsp;hashTable,
 int&nbsp;lgArrLongs,
 long&nbsp;hash)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">This is a classical Knuth-style Open Addressing, Double Hash (OADH) search scheme for on-heap.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#hashSearchMemorySegment(java.lang.foreign.MemorySegment,int,long,int)" class="member-name-link">hashSearchMemorySegment</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/foreign/MemorySegment.html" title="class or interface in java.lang.foreign" class="external-link">MemorySegment</a>&nbsp;seg,
 int&nbsp;lgArrLongs,
 long&nbsp;hash,
 int&nbsp;segOffsetBytes)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">This is a classical Knuth-style Open Addressing, Double Hash (OADH) search scheme for MemorySegment.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#hashSearchOrInsert(long%5B%5D,int,long)" class="member-name-link">hashSearchOrInsert</a><wbr>(long[]&nbsp;hashTable,
 int&nbsp;lgArrLongs,
 long&nbsp;hash)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">This is a classical Knuth-style Open Addressing, Double Hash (OADH) insert scheme for on-heap.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#hashSearchOrInsertMemorySegment(java.lang.foreign.MemorySegment,int,long,int)" class="member-name-link">hashSearchOrInsertMemorySegment</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/foreign/MemorySegment.html" title="class or interface in java.lang.foreign" class="external-link">MemorySegment</a>&nbsp;wseg,
 int&nbsp;lgArrLongs,
 long&nbsp;hash,
 int&nbsp;segOffsetBytes)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">This is a classical Knuth-style Open Addressing, Double Hash insert scheme, but inserts
values directly into a writable MemorySegment.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#minLgHashTableSize(int,double)" class="member-name-link">minLgHashTableSize</a><wbr>(int&nbsp;count,
 double&nbsp;rebuild_threshold)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns the smallest log hash table size given the count of items and the rebuild threshold.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html#method-summary" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="STRIDE_MASK">
<h3>STRIDE_MASK</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">STRIDE_MASK</span></div>
<div class="block">The stride mask for the Open Address, Double Hashing (OADH) hash table algorithm.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="../../../../constant-values.html#org.apache.datasketches.thetacommon.HashOperations.STRIDE_MASK">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="hashSearch(long[],int,long)">
<h3>hashSearch</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">hashSearch</span><wbr><span class="parameters">(long[]&nbsp;hashTable,
 int&nbsp;lgArrLongs,
 long&nbsp;hash)</span></div>
<div class="block">This is a classical Knuth-style Open Addressing, Double Hash (OADH) search scheme for on-heap.
Returns the index if found, -1 if not found.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>hashTable</code> - The hash table to search. Its size must be a power of 2.</dd>
<dd><code>lgArrLongs</code> - The log_base2(hashTable.length).
<a href="../../../../resources/dictionary.html#lgArrLongs">See lgArrLongs</a>.</dd>
<dd><code>hash</code> - The hash value to search for. It must not be zero.</dd>
<dt>Returns:</dt>
<dd>Current probe index if found, -1 if not found.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="hashInsertOnly(long[],int,long)">
<h3>hashInsertOnly</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">hashInsertOnly</span><wbr><span class="parameters">(long[]&nbsp;hashTable,
 int&nbsp;lgArrLongs,
 long&nbsp;hash)</span></div>
<div class="block">This is a classical Knuth-style Open Addressing, Double Hash (OADH) insert scheme for on-heap.
This method assumes that the input hash is not a duplicate.
Useful for rebuilding tables to avoid unnecessary comparisons.
Returns the index of insertion, which is always positive or zero.
Throws an exception if the table has no empty slot.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>hashTable</code> - the hash table to insert into. Its size must be a power of 2.</dd>
<dd><code>lgArrLongs</code> - The log_base2(hashTable.length).
<a href="../../../../resources/dictionary.html#lgArrLongs">See lgArrLongs</a>.</dd>
<dd><code>hash</code> - The hash value to be potentially inserted into an empty slot. It must not be zero.</dd>
<dt>Returns:</dt>
<dd>index of insertion.  Always positive or zero.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="hashSearchOrInsert(long[],int,long)">
<h3>hashSearchOrInsert</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">hashSearchOrInsert</span><wbr><span class="parameters">(long[]&nbsp;hashTable,
 int&nbsp;lgArrLongs,
 long&nbsp;hash)</span></div>
<div class="block">This is a classical Knuth-style Open Addressing, Double Hash (OADH) insert scheme for on-heap.
Returns index &ge; 0 if found (duplicate); &lt; 0 if inserted, inserted at -(index + 1).
Throws an exception if the value is not found and table has no empty slot.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>hashTable</code> - The hash table to insert into. Its size must be a power of 2.</dd>
<dd><code>lgArrLongs</code> - The log_base2(hashTable.length).
<a href="../../../../resources/dictionary.html#lgArrLongs">See lgArrLongs</a>.</dd>
<dd><code>hash</code> - The hash value to be potentially inserted into an empty slot only if it is not
a duplicate of any other hash value in the table. It must not be zero.</dd>
<dt>Returns:</dt>
<dd>index &ge; 0 if found (duplicate); &lt; 0 if inserted, inserted at -(index + 1).</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="hashArrayInsert(long[],long[],int,long)">
<h3>hashArrayInsert</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">hashArrayInsert</span><wbr><span class="parameters">(long[]&nbsp;srcArr,
 long[]&nbsp;hashTable,
 int&nbsp;lgArrLongs,
 long&nbsp;thetaLong)</span></div>
<div class="block">Inserts the given long array into the given OADH hashTable of the target size,
ignores duplicates and counts the values inserted.
The hash values must not be negative, zero values and values &ge; thetaLong are ignored.
The given hash table may have values, but they must have been inserted by this method or one
of the other OADH insert methods in this class.
This method performs additional checks against potentially invalid hash values or theta values.
Returns the count of values actually inserted.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>srcArr</code> - the source hash array to be potentially inserted</dd>
<dd><code>hashTable</code> - The hash table to insert into. Its size must be a power of 2.</dd>
<dd><code>lgArrLongs</code> - The log_base2(hashTable.length).
<a href="../../../../resources/dictionary.html#lgArrLongs">See lgArrLongs</a>.</dd>
<dd><code>thetaLong</code> - The theta value that all input hash values are compared against.
It must greater than zero.
<a href="../../../../resources/dictionary.html#thetaLong">See Theta Long</a></dd>
<dt>Returns:</dt>
<dd>the count of values actually inserted</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="hashSearchMemorySegment(java.lang.foreign.MemorySegment,int,long,int)">
<h3>hashSearchMemorySegment</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">hashSearchMemorySegment</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/foreign/MemorySegment.html" title="class or interface in java.lang.foreign" class="external-link">MemorySegment</a>&nbsp;seg,
 int&nbsp;lgArrLongs,
 long&nbsp;hash,
 int&nbsp;segOffsetBytes)</span></div>
<div class="block">This is a classical Knuth-style Open Addressing, Double Hash (OADH) search scheme for MemorySegment.
Returns the index if found, -1 if not found.  The input MemorySegment may be read only.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>seg</code> - The <i>MemorySegment</i> containing the hash table to search.
The hash table portion must be a power of 2 in size.</dd>
<dd><code>lgArrLongs</code> - The log_base2(hashTable.length).
<a href="../../../../resources/dictionary.html#lgArrLongs">See lgArrLongs</a>.</dd>
<dd><code>hash</code> - The hash value to search for. Must not be zero.</dd>
<dd><code>segOffsetBytes</code> - offset in the MemorySegment where the hashTable starts</dd>
<dt>Returns:</dt>
<dd>Current probe index if found, -1 if not found.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="hashInsertOnlyMemorySegment(java.lang.foreign.MemorySegment,int,long,int)">
<h3>hashInsertOnlyMemorySegment</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">hashInsertOnlyMemorySegment</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/foreign/MemorySegment.html" title="class or interface in java.lang.foreign" class="external-link">MemorySegment</a>&nbsp;wseg,
 int&nbsp;lgArrLongs,
 long&nbsp;hash,
 int&nbsp;segOffsetBytes)</span></div>
<div class="block">This is a classical Knuth-style Open Addressing, Double Hash (OADH) insert scheme for MemorySegment.
This method assumes that the input hash is not a duplicate.
Useful for rebuilding tables to avoid unnecessary comparisons.
Returns the index of insertion, which is always positive or zero.
Throws an exception if table has no empty slot.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>wseg</code> - The writable <i>MemorySegment</i> that contains the hashTable to insert into.
The size of the hashTable portion must be a power of 2.</dd>
<dd><code>lgArrLongs</code> - The log_base2(hashTable.length.
<a href="../../../../resources/dictionary.html#lgArrLongs">See lgArrLongs</a>.</dd>
<dd><code>hash</code> - value that must not be zero and will be inserted into the array into an empty slot.</dd>
<dd><code>segOffsetBytes</code> - offset in the writable <i>MemorySegment</i> where the hashTable starts</dd>
<dt>Returns:</dt>
<dd>index of insertion.  Always positive or zero.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="hashSearchOrInsertMemorySegment(java.lang.foreign.MemorySegment,int,long,int)">
<h3>hashSearchOrInsertMemorySegment</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">hashSearchOrInsertMemorySegment</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/foreign/MemorySegment.html" title="class or interface in java.lang.foreign" class="external-link">MemorySegment</a>&nbsp;wseg,
 int&nbsp;lgArrLongs,
 long&nbsp;hash,
 int&nbsp;segOffsetBytes)</span></div>
<div class="block">This is a classical Knuth-style Open Addressing, Double Hash insert scheme, but inserts
values directly into a writable MemorySegment.
Returns index &ge; 0 if found (duplicate); &lt; 0 if inserted, inserted at -(index + 1).
Throws an exception if the value is not found and table has no empty slot.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>wseg</code> - The writable <i>MemorySegment</i> that contains the hashTable to insert into.</dd>
<dd><code>lgArrLongs</code> - The log_base2(hashTable.length).
<a href="../../../../resources/dictionary.html#lgArrLongs">See lgArrLongs</a>.</dd>
<dd><code>hash</code> - The hash value to be potentially inserted into an empty slot only if it is not
a duplicate of any other hash value in the table. It must not be zero.</dd>
<dd><code>segOffsetBytes</code> - offset in the writable <i>MemorySegment</i> where the hash array starts</dd>
<dt>Returns:</dt>
<dd>index &ge; 0 if found (duplicate); &lt; 0 if inserted, inserted at -(index + 1).</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="checkThetaCorruption(long)">
<h3>checkThetaCorruption</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">checkThetaCorruption</span><wbr><span class="parameters">(long&nbsp;thetaLong)</span></div>
<div class="block">Checks that the given theta is not negative nor zero.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>thetaLong</code> - must be greater than zero otherwise throws an exception.
<a href="../../../../resources/dictionary.html#thetaLong">See Theta Long</a></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="checkHashCorruption(long)">
<h3>checkHashCorruption</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">checkHashCorruption</span><wbr><span class="parameters">(long&nbsp;hash)</span></div>
<div class="block">Checks that the given hash value is not negative.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>hash</code> - must be greater than -1 otherwise throws an exception.
Note a hash of zero is normally ignored, but a negative hash is never allowed.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="continueCondition(long,long)">
<h3>continueCondition</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">continueCondition</span><wbr><span class="parameters">(long&nbsp;thetaLong,
 long&nbsp;hash)</span></div>
<div class="block">Return true (continue) if hash is greater than or equal to thetaLong, or if hash == 0,
or if hash == Long.MAX_VALUE.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>thetaLong</code> - must be greater than the hash value
<a href="../../../../resources/dictionary.html#thetaLong">See Theta Long</a></dd>
<dd><code>hash</code> - must be less than thetaLong and not less than or equal to zero.</dd>
<dt>Returns:</dt>
<dd>true (continue) if hash is greater than or equal to thetaLong, or if hash == 0,
or if hash == Long.MAX_VALUE.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="convertToHashTable(long[],int,long,double)">
<h3>convertToHashTable</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">long[]</span>&nbsp;<span class="element-name">convertToHashTable</span><wbr><span class="parameters">(long[]&nbsp;hashArr,
 int&nbsp;count,
 long&nbsp;thetaLong,
 double&nbsp;rebuildThreshold)</span></div>
<div class="block">Converts the given array to a hash table.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>hashArr</code> - The given array of hashes. Gaps are OK.</dd>
<dd><code>count</code> - The number of valid hashes in the array</dd>
<dd><code>thetaLong</code> - Any hashes equal to or greater than thetaLong will be ignored</dd>
<dd><code>rebuildThreshold</code> - The fill fraction for the hash table forcing a rebuild or resize.</dd>
<dt>Returns:</dt>
<dd>a HashTable</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="minLgHashTableSize(int,double)">
<h3>minLgHashTableSize</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">minLgHashTableSize</span><wbr><span class="parameters">(int&nbsp;count,
 double&nbsp;rebuild_threshold)</span></div>
<div class="block">Returns the smallest log hash table size given the count of items and the rebuild threshold.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>count</code> - the given count of items</dd>
<dd><code>rebuild_threshold</code> - the rebuild threshold as a fraction between zero and one.</dd>
<dt>Returns:</dt>
<dd>the smallest log hash table size</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="countPart(long[],int,long)">
<h3>countPart</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">countPart</span><wbr><span class="parameters">(long[]&nbsp;srcArr,
 int&nbsp;lgArrLongs,
 long&nbsp;thetaLong)</span></div>
<div class="block">Counts the cardinality of the first Log2 values of the given source array.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>srcArr</code> - the given source array</dd>
<dd><code>lgArrLongs</code> - <a href="../../../../resources/dictionary.html#lgArrLongs">See lgArrLongs</a></dd>
<dd><code>thetaLong</code> - <a href="../../../../resources/dictionary.html#thetaLong">See Theta Long</a></dd>
<dt>Returns:</dt>
<dd>the cardinality</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="count(long[],long)">
<h3>count</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">count</span><wbr><span class="parameters">(long[]&nbsp;srcArr,
 long&nbsp;thetaLong)</span></div>
<div class="block">Counts the cardinality of the given source array.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>srcArr</code> - the given source array</dd>
<dd><code>thetaLong</code> - <a href="../../../../resources/dictionary.html#thetaLong">See Theta Long</a></dd>
<dt>Returns:</dt>
<dd>the cardinality</dd>
</dl>
</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2015&#x2013;2024 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</footer>
</main>
</div>
</body>
</html>
